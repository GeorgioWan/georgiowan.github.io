<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>新樂街口的三角窗</title>
  <subtitle>我，在這裡，享受等你的時光。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://georgiowan.github.io/"/>
  <updated>2016-05-25T06:33:00.951Z</updated>
  <id>http://georgiowan.github.io/</id>
  
  <author>
    <name>OAwan</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>[資訊] 超好用換幣神器！教你怎麼換韓元最划算</title>
    <link href="http://georgiowan.github.io/2016/travel-to-korea-money-exchange/"/>
    <id>http://georgiowan.github.io/2016/travel-to-korea-money-exchange/</id>
    <published>2016-05-24T17:07:00.000Z</published>
    <updated>2016-05-25T06:33:00.951Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/travel/money.jpg&quot; alt=&quot;Money Exchange&quot; title=&quot;Pic by Bill Pirraglia&quot;&gt;&lt;/p&gt;
&lt;p&gt;到韓國自由行，&lt;span style=&quot;font-size: 20px; color: #009688&quot;&gt;怎麼換韓元最划算呢？&lt;/span&gt;&lt;br&gt;讓我們一起用&lt;strong&gt;換幣 (Money Exchange)&lt;/strong&gt; 來小賺一點交通費吧！&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;最划算的換幣方式是？&quot;&gt;&lt;a href=&quot;#最划算的換幣方式是？&quot; class=&quot;headerlink&quot; title=&quot;最划算的換幣方式是？&quot;&gt;&lt;/a&gt;最划算的換幣方式是？&lt;/h1&gt;&lt;p&gt;相信在前往韓國自由行前，最重要的事情除了訂機票、住宿和安排行程活動外，就是&lt;span style=&quot;color: #009688&quot;&gt;研究如何換幣&lt;/span&gt;了！&lt;br&gt;這邊不囉嗦，馬上告訴你一些划算的小心得：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;先在&lt;span style=&quot;font-size: 18px; color: #EC6161&quot;&gt;台灣換&lt;strong&gt;美金&lt;/strong&gt;&lt;/span&gt;，再拿&lt;span style=&quot;font-size: 18px; color: #EC6161&quot;&gt;&lt;strong&gt;美金&lt;/strong&gt;到韓國換&lt;strong&gt;韓元(₩)&lt;/strong&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;直接帶著&lt;span style=&quot;font-size: 18px; color: #EC6161&quot;&gt;&lt;strong&gt;台幣&lt;/strong&gt;到韓國換&lt;strong&gt;韓元&lt;/strong&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;謹記：千萬別在台灣直接換韓元！&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;那究竟哪種方式較好呢？&quot;&gt;&lt;a href=&quot;#那究竟哪種方式較好呢？&quot; class=&quot;headerlink&quot; title=&quot;那究竟哪種方式較好呢？&quot;&gt;&lt;/a&gt;那究竟哪種方式較好呢？&lt;/h1&gt;&lt;p&gt;除了上面提到的兩種換錢方式：&lt;span style=&quot;color: #009688; border: 1px solid #009688; border-radius: 4px; padding: 1px 5px;&quot;&gt;美金換韓元&lt;/span&gt;、&lt;span style=&quot;color: #009688; border: 1px solid #009688; border-radius: 4px; padding: 1px 5px;&quot;&gt;台幣換韓元&lt;/span&gt; 外，&lt;br&gt;其實也有些精打細算的朋友也會去計算 &lt;span style=&quot;color: #009688; border: 1px solid #009688; border-radius: 4px; padding: 1px 5px;&quot;&gt;日幣換韓元&lt;/span&gt; 是否也划算？那究竟在匯率不停變動時，什麼樣的方式換韓元最好呢？&lt;br&gt;雖然很重要，但，&lt;strong&gt;為了換錢而點高經濟學技能&lt;/strong&gt; 對於 &lt;em&gt;&lt;del&gt;宅男&lt;/del&gt;&lt;/em&gt; 門外漢來說實在太不容易了，其實就是懶 XDD&lt;/p&gt;
&lt;p&gt;秉持著攻城獅的原則 &lt;strong&gt;「這麼累的事情只能累一次」&lt;/strong&gt;！&lt;br&gt;於是，超好用的換錢神器就誕生啦！！！&lt;/p&gt;
&lt;h1 id=&quot;換幣神器抵佳啦！&quot;&gt;&lt;a href=&quot;#換幣神器抵佳啦！&quot; class=&quot;headerlink&quot; title=&quot;換幣神器抵佳啦！&quot;&gt;&lt;/a&gt;換幣神器抵佳啦！&lt;/h1&gt;&lt;iframe height=&quot;450&quot; width=&quot;850&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;box-shadow:4px 4px 12px -2px rgba(20%,20%,40%,0.5);&quot; src=&quot;https://docs.google.com/spreadsheets/d/1-_3JwhXhqw0vT6GVgeXtsVh7H__RQIubxRyLDfDZeG4/edit?usp=sharing&quot;&gt;&lt;/iframe&gt;



&lt;h1 id=&quot;怎麼使用？&quot;&gt;&lt;a href=&quot;#怎麼使用？&quot; class=&quot;headerlink&quot; title=&quot;怎麼使用？&quot;&gt;&lt;/a&gt;怎麼使用？&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;於 &lt;span style=&quot;background-color: #B7E1CD; border-radius: 4px; padding: 1px 5px;&quot;&gt;B2&lt;/span&gt; 中填入想換的&lt;strong&gt;台幣金額&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;經過換算後，幫你標記為 &lt;span style=&quot;color: white;background-color: #EC6161; border-radius: 4px; padding: 1px 5px;&quot;&gt;紅色的部分&lt;/span&gt; 就是最划算的方式了！&lt;/li&gt;
&lt;li&gt;快快樂樂地帶摳摳去&lt;strong&gt;賺交通費&lt;/strong&gt;囉！&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;說明&quot;&gt;&lt;a href=&quot;#說明&quot; class=&quot;headerlink&quot; title=&quot;說明&quot;&gt;&lt;/a&gt;說明&lt;/h1&gt;&lt;p&gt;&lt;span style=&quot;background-color: #FFD966; border-radius: 4px; padding: 1px 5px;&quot;&gt;在台灣銀行&lt;/span&gt;：此部分匯率會由&lt;a href=&quot;http://rate.bot.com.tw/Pages/Static/UIP003.zh-TW.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;台灣銀行&lt;/strong&gt;&lt;/a&gt;牌告匯率作即時的更新。&lt;br&gt;&lt;span style=&quot;background-color: #FFD966; border-radius: 4px; padding: 1px 5px;&quot;&gt;在韓國銀行&lt;/span&gt;：此部分匯率會由&lt;a href=&quot;http://fx.keb.co.kr/FER1101C.web?schID=pib&amp;amp;LOCALE_CODE=EN&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;韓國KEB銀行&lt;/strong&gt;&lt;/a&gt;牌告匯率作即時的更新。&lt;br&gt;&lt;span style=&quot;color: white; background-color: black; border-radius: 4px; padding: 1px 5px;&quot;&gt;F4、F7、F8、F9&lt;/span&gt;：比較換得的韓元總額，要兌換的金額越大，差額就越驚人哪！&lt;br&gt;&lt;span style=&quot;border: 1px solid black; border-radius: 4px; padding: 1px 5px;&quot;&gt;G4、G7、G8、G9&lt;/span&gt;：比較 1 元台幣能換得多少韓元。&lt;/p&gt;
&lt;h1 id=&quot;關於換錢所「환전」&quot;&gt;&lt;a href=&quot;#關於換錢所「환전」&quot; class=&quot;headerlink&quot; title=&quot;關於換錢所「환전」&quot;&gt;&lt;/a&gt;關於換錢所「환전」&lt;/h1&gt;&lt;p&gt;到韓國玩一定得了解到 &lt;strong&gt;換錢所&lt;/strong&gt; 換錢這件事，&lt;br&gt;由上面的換錢神器我們可以清楚地知道，&lt;span style=&quot;font-size: 18px; color: #EC6161&quot;&gt;從台灣帶什麼幣去換韓元&lt;/span&gt; 最划算，&lt;br&gt;所以，只要在出發前備好 &lt;strong&gt;待換的幣&lt;/strong&gt;，前往當地換錢所貨比三家，就只是賺多賺少的問題啦~~~&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;通常換錢所都很集中，務必貨比三家一下喲！&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;想多了解換錢所的詳細資訊，可以參考 &lt;a href=&quot;http://rainieis.tw/blog/post/30941557-%5B%E9%9F%93%E5%9C%8B%5D-%E9%A6%96%E7%88%BE-seoul-%7C-%E6%B0%91%E9%96%93%E6%8F%9B%E9%8C%A2%E6%89%80-%E7%BE%8E%E9%87%91%E6%8F%9B%E9%8C%A2%E8%81%B0%E6%98%8E&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;披著虎皮的貓&lt;/strong&gt;&lt;/a&gt; 超用心的整理 &lt;i class=&quot;fa fa-heart&quot; style=&quot;color: #EC6161&quot;&gt;&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;That’s it！&lt;strong&gt;Done&lt;/strong&gt;！&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;如果對文章或換幣神器有任何疑問、建議，都歡迎留言聊聊喔！&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/travel/money.jpg&quot; alt=&quot;Money Exchange&quot; title=&quot;Pic by Bill Pirraglia&quot;&gt;&lt;/p&gt;
&lt;p&gt;到韓國自由行，&lt;span style=&quot;font-size: 20px; color: #009688&quot;&gt;怎麼換韓元最划算呢？&lt;/span&gt;&lt;br&gt;讓我們一起用&lt;strong&gt;換幣 (Money Exchange)&lt;/strong&gt; 來小賺一點交通費吧！&lt;/p&gt;
    
    </summary>
    
      <category term="Travel" scheme="http://georgiowan.github.io/categories/Travel/"/>
    
    
      <category term="korea" scheme="http://georgiowan.github.io/tags/korea/"/>
    
      <category term="tool" scheme="http://georgiowan.github.io/tags/tool/"/>
    
      <category term="換幣神器" scheme="http://georgiowan.github.io/tags/%E6%8F%9B%E5%B9%A3%E7%A5%9E%E5%99%A8/"/>
    
      <category term="韓國" scheme="http://georgiowan.github.io/tags/%E9%9F%93%E5%9C%8B/"/>
    
      <category term="旅遊" scheme="http://georgiowan.github.io/tags/%E6%97%85%E9%81%8A/"/>
    
  </entry>
  
  <entry>
    <title>[Rails] Devise 使用 Facebook 註冊與登入</title>
    <link href="http://georgiowan.github.io/2016/rails-devise-using-facebook-signup-login/"/>
    <id>http://georgiowan.github.io/2016/rails-devise-using-facebook-signup-login/</id>
    <published>2016-05-20T11:28:00.000Z</published>
    <updated>2016-05-25T07:24:09.179Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/program/Facebookcoke.jpg&quot; alt=&quot;Devise 使用 Facebook 註冊與登入&quot; title=&quot;Pic by Facebookcoke&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　在 Devise 下，使用 Facebook 註冊與登入。&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　相信大家都很熟練 &lt;a href=&quot;https://github.com/plataformatec/devise&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;Devise&lt;/strong&gt;&lt;/a&gt; 這個 Gem 的使用者機制，當然除了一般的註冊申請帳號外，最方便是要能與各大社交平台有所連結；而 Devise 中透過 &lt;a href=&quot;https://github.com/intridea/omniauth&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;OmniAuth&lt;/strong&gt;&lt;/a&gt; 快速地串接 Facebook、google、github… 等，以下就筆記一下如何使用 Facebook 註冊登入！&lt;/p&gt;
&lt;h1 id=&quot;開發版本與環境&quot;&gt;&lt;a href=&quot;#開發版本與環境&quot; class=&quot;headerlink&quot; title=&quot;開發版本與環境&quot;&gt;&lt;/a&gt;&lt;strong&gt;開發版本與環境&lt;/strong&gt;&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;　　Ruby  : v2.3.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　Rails : v4.2.5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　IDE   : Cloud 9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;筆記&quot;&gt;&lt;a href=&quot;#筆記&quot; class=&quot;headerlink&quot; title=&quot;筆記&quot;&gt;&lt;/a&gt;&lt;strong&gt;筆記&lt;/strong&gt;&lt;/h1&gt;&lt;h3 id=&quot;1-什麼是-OmniAuth&quot;&gt;&lt;a href=&quot;#1-什麼是-OmniAuth&quot; class=&quot;headerlink&quot; title=&quot;1. 什麼是 OmniAuth ?&quot;&gt;&lt;/a&gt;1. 什麼是 OmniAuth ?&lt;/h3&gt;&lt;p&gt;　　OmniAuth 是一個提供多方認證，且不被限定於特定框架的認證方案，主要架構如下：&lt;/p&gt;
&lt;h4 id=&quot;Provider&quot;&gt;&lt;a href=&quot;#Provider&quot; class=&quot;headerlink&quot; title=&quot;Provider&quot;&gt;&lt;/a&gt;&lt;em&gt;Provider&lt;/em&gt;&lt;/h4&gt;&lt;p&gt;　　OmniAuth 將所有的認證方視為不同的 Provider，而每種 Provider 都有各自的 Strategy。&lt;/p&gt;
&lt;h4 id=&quot;Strategy&quot;&gt;&lt;a href=&quot;#Strategy&quot; class=&quot;headerlink&quot; title=&quot;Strategy&quot;&gt;&lt;/a&gt;&lt;em&gt;Strategy&lt;/em&gt;&lt;/h4&gt;&lt;p&gt;　　每個 Strategy 分為兩個 phase，對應 OmniAuth 提供的 url：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;equest phase　=&amp;gt;　&lt;code&gt;/auth/:provider&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;callback phase =&amp;gt;　&lt;code&gt;/auth/:provider/callback&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;　　而它的流程是，透過 &lt;code&gt;/auth/:provider&lt;/code&gt; 重導去認證，認證成功後 redirect 到 &lt;code&gt;/auth/:provider/callback&lt;/code&gt; 作 session create 動作 ( 透過拿回來的資料 find_or_create user )&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;註： :provider 就是 facebook、github，所以 url 看起來會是 /auth/facebook、/auth/facebook/callback。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;2-一起來實作&quot;&gt;&lt;a href=&quot;#2-一起來實作&quot; class=&quot;headerlink&quot; title=&quot;2. 一起來實作&quot;&gt;&lt;/a&gt;2. 一起來實作&lt;/h3&gt;&lt;h4 id=&quot;步驟零、-Install-gem&quot;&gt;&lt;a href=&quot;#步驟零、-Install-gem&quot; class=&quot;headerlink&quot; title=&quot;步驟零、 Install gem&quot;&gt;&lt;/a&gt;&lt;strong&gt;步驟零、 Install gem&lt;/strong&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;Gemfile&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gem &lt;span class=&quot;string&quot;&gt;&#39;omniauth&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gem &lt;span class=&quot;string&quot;&gt;&#39;omniauth-facebook&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gem &lt;span class=&quot;string&quot;&gt;&#39;koala&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;~-&amp;gt; 2.2&quot;&lt;/span&gt;  &lt;span class=&quot;comment&quot;&gt;# 為了讓授權失敗時，刪除 permission session 使用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;步驟一、-建立-Facebook-Application&quot;&gt;&lt;a href=&quot;#步驟一、-建立-Facebook-Application&quot; class=&quot;headerlink&quot; title=&quot;步驟一、 建立 Facebook Application&quot;&gt;&lt;/a&gt;&lt;strong&gt;步驟一、 建立 Facebook Application&lt;/strong&gt;&lt;/h4&gt;&lt;p&gt;　　使用 Facebook 應用服務前，需先到 &lt;a href=&quot;https://developers.facebook.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Facebook developer&lt;/a&gt; 建立應用程式，只要按照步驟就可以順利建立完成。&lt;/p&gt;
&lt;h4 id=&quot;步驟二、-於-devise-rb-中設定-config-omniauth&quot;&gt;&lt;a href=&quot;#步驟二、-於-devise-rb-中設定-config-omniauth&quot; class=&quot;headerlink&quot; title=&quot;步驟二、 於 devise.rb 中設定 config.omniauth&quot;&gt;&lt;/a&gt;&lt;strong&gt;步驟二、 於 devise.rb 中設定 config.omniauth&lt;/strong&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;devise.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;config.omniauth &lt;span class=&quot;symbol&quot;&gt;:facebook&lt;/span&gt;, ENB[&lt;span class=&quot;string&quot;&gt;&#39;FB_KEY&#39;&lt;/span&gt;], ENV[&lt;span class=&quot;string&quot;&gt;&#39;FB_SECRET&#39;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;symbol&quot;&gt;scope:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;email&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;symbol&quot;&gt;info_fields:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;email, name, link&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;symbol&quot;&gt;secure_image_url:&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;symbol&quot;&gt;image_size:&lt;/span&gt;  &lt;span class=&quot;string&quot;&gt;&#39;large&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;這邊使用 Rails_ENV 確保我們的資料隱密性，可參考 &lt;a href=&quot;http://georgiowan.logdown.com/notes/732233/rails-send-small-notes-via-actionmailer&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;這篇的 Rails_ENV 小筆記&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;FB_KEY&lt;/strong&gt;：Facebook 應用程式&lt;em&gt;編號&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;FB_SECRET&lt;/strong&gt;：Facebook 應用程式&lt;em&gt;密鑰&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;scope&lt;/strong&gt;：表示將取得使用者的什麼&lt;em&gt;權限&lt;/em&gt;，email 為預設，即取得使用者公開的資訊 ( public_profile ) 權限&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;info_fields&lt;/strong&gt;：表示在擁有權限下，取得使用者的什麼&lt;em&gt;資訊&lt;/em&gt;，這邊我們取得使用者的 Email、名稱和 FB 連結&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;secure_image_url&lt;/strong&gt;：為 true，表示我們透過 https 取得使用者大頭貼&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;image_size&lt;/strong&gt;：此為取得大頭貼的 size，&lt;code&gt;square&lt;/code&gt;(50x50)、&lt;code&gt;small&lt;/code&gt;(50 px width, ariable height)、&lt;code&gt;normal&lt;/code&gt;(100 px width, variable height)、&lt;code&gt;large&lt;/code&gt;(約 200 px wide, variable height)&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;以上設定，我們可以從 &lt;a href=&quot;https://github.com/mkdynamic/omniauth-facebook#configuring&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;omniauth-facebook&lt;/strong&gt;&lt;/a&gt; 清楚的了解。&lt;br&gt;若是想取得其他的&lt;strong&gt;權限與資訊&lt;/strong&gt;，可以先到 &lt;a href=&quot;https://developers.facebook.com/docs/facebook-login/permissions&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Facebook developer permissions&lt;/a&gt; 查看。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;步驟三、-於-user-rb-中設定-omniauth&quot;&gt;&lt;a href=&quot;#步驟三、-於-user-rb-中設定-omniauth&quot; class=&quot;headerlink&quot; title=&quot;步驟三、 於 user.rb 中設定 omniauth&quot;&gt;&lt;/a&gt;&lt;strong&gt;步驟三、 於 user.rb 中設定 omniauth&lt;/strong&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;user.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;devise &lt;span class=&quot;symbol&quot;&gt;:omniauthable&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;:omniauth_providers&lt;/span&gt; =&amp;gt; [&lt;span class=&quot;symbol&quot;&gt;:facebook&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;　　定義認證後的創建行為，會在取得使用者 Facebook 權限與資訊後執行：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;user.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;self&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;from_omniauth&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(auth)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  where(&lt;span class=&quot;symbol&quot;&gt;provider:&lt;/span&gt; auth.provider, &lt;span class=&quot;symbol&quot;&gt;uid:&lt;/span&gt; auth.uid).first_or_create &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;|user|&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    user.provider = auth.provider&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    user.uid      = auth.uid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    user.email    = auth.info.email&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    user.name     = auth.info.name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    user.facebook = auth.info.urls.Facebook&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    user.password = Devise.friendly_token[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    user.remote_avatar_url   = auth.info.image&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    user.skip_confirmation!  &lt;span class=&quot;comment&quot;&gt;# 如果 devise 有使用 confirmable，記得 skip！&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　　授權失敗時，透過 &lt;code&gt;koala&lt;/code&gt; 刪除使用者授權的 session，以便重新授權。&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;user.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;delete_access_token&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(auth)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  @graph &lt;span class=&quot;params&quot;&gt;||&lt;/span&gt;= Koala::Facebook::API.new(auth.credentials.token)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  @graph.delete_connections(auth.uid, &lt;span class=&quot;string&quot;&gt;&quot;permissions&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;步驟四、-定義-omniauth-callback-controller&quot;&gt;&lt;a href=&quot;#步驟四、-定義-omniauth-callback-controller&quot; class=&quot;headerlink&quot; title=&quot;步驟四、 定義 omniauth callback controller&quot;&gt;&lt;/a&gt;&lt;strong&gt;步驟四、 定義 omniauth callback controller&lt;/strong&gt;&lt;/h4&gt;&lt;p&gt;　　新增一個 &lt;code&gt;Users::OmniauthCallBacksController&lt;/code&gt;，我們在這個地方定義兩個 action：facebook 和 failure。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;facebook&lt;/strong&gt; method 作的三件事：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;　　　1. 使用者授權後，依取得的資訊創建新的 user。&lt;br&gt;　　　2. 如果此使用者已經存在網站中，直接登入。&lt;br&gt;　　　3. 授權後，未取得 email 者，重新要求授權。(這是因為我的網站使用者 email 為必填項目，且為登入憑據)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;failure&lt;/strong&gt;：重新導向註冊頁，並告知使用者授權錯誤。&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;omniauth_callback.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Users::OmniauthCallbacksController&lt;/span&gt; &amp;lt; Devise::OmniauthCallbacksController&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;facebook&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @user = User.from_omniauth(request.env[&lt;span class=&quot;string&quot;&gt;&quot;omniauth.auth&quot;&lt;/span&gt;])  &lt;span class=&quot;comment&quot;&gt;# 這邊會呼叫我們在 user 中定義的創建行為&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; @user.persisted?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      sign_in_and_redirect @user, &lt;span class=&quot;symbol&quot;&gt;:event&lt;/span&gt; =&amp;gt; &lt;span class=&quot;symbol&quot;&gt;:authentication&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      set_flash_message(&lt;span class=&quot;symbol&quot;&gt;:notice&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;:success&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;:kind&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;Facebook&quot;&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; is_navigational_format?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; @user.email.&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# 如果 User 沒有提供 email 刪除 User 的 app 讓 User 重新授權&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        @user.delete_access_token(request.env[&lt;span class=&quot;string&quot;&gt;&quot;omniauth.auth&quot;&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        redirect_to new_user_registration_url, &lt;span class=&quot;symbol&quot;&gt;alert:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;需要您同意 Email 授權唷！&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session[&lt;span class=&quot;string&quot;&gt;&quot;devise.facebook_data&quot;&lt;/span&gt;] = request.env[&lt;span class=&quot;string&quot;&gt;&quot;omniauth.auth&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        redirect_to new_user_registration_url&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;failure&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    redirect_to new_user_session_path, &lt;span class=&quot;symbol&quot;&gt;alert:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;無法獲得驗證！&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;步驟五、-到-routes-rb-設定-devise-omniauth-callback-該用哪個-controller&quot;&gt;&lt;a href=&quot;#步驟五、-到-routes-rb-設定-devise-omniauth-callback-該用哪個-controller&quot; class=&quot;headerlink&quot; title=&quot;步驟五、 到 routes.rb 設定 devise omniauth callback 該用哪個 controller&quot;&gt;&lt;/a&gt;&lt;strong&gt;步驟五、 到 routes.rb 設定 devise omniauth callback 該用哪個 controller&lt;/strong&gt;&lt;/h4&gt;&lt;p&gt;　　我們要讓 omniauth callback 時使用我們定義的 controller：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;routes.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;devise_for &lt;span class=&quot;symbol&quot;&gt;:users&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;controllers:&lt;/span&gt; &amp;#123;&lt;span class=&quot;symbol&quot;&gt;omniauth_callbacks:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;users/omniauth_callbacks&quot;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Devise 使用 OmniAuth 時，會自動幫你在 &lt;code&gt;registrations#new&lt;/code&gt; 產生 provider 登入的 link，所以不必自行添加，或是你也可以在想添加的地方加入：&lt;br&gt;　　&lt;code&gt;&amp;lt;%= link_to &amp;quot;Sign in with Facebook&amp;quot;, user_omniauth_authorize_path(:facebook) %&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;h1 id=&quot;後記&quot;&gt;&lt;a href=&quot;#後記&quot; class=&quot;headerlink&quot; title=&quot;後記&quot;&gt;&lt;/a&gt;&lt;strong&gt;後記&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　授權失敗時，需要重新授權 (Permissions revoke)，這個問題看似很簡單，卻花了我不少時間；原因是不想為了解決這個小問題，而多使用一個 gem，但最終我還是選擇用 koala 解決了，如果有不多加使用 gem 的解法請來信或留言，感激不盡！&lt;/p&gt;
&lt;p&gt;That’s it, &lt;strong&gt;DONE!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;【參考資料】&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;XDITE OmniAuth 系列文章：&lt;a href=&quot;http://blog.xdite.net/posts/2011/11/19/omniauth-clean-auth-provider-1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.xdite.net/posts/2011/11/19/omniauth-clean-auth-provider-1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;devise OmniAuth document：&lt;a href=&quot;https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Auth Hash Schema：&lt;a href=&quot;https://github.com/intridea/omniauth/wiki/Auth-Hash-Schema&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/intridea/omniauth/wiki/Auth-Hash-Schema&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;OmniAuth Facebook：&lt;a href=&quot;https://github.com/mkdynamic/omniauth-facebook&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/mkdynamic/omniauth-facebook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;FB Revoking Permissions: &lt;a href=&quot;http://azhen.logdown.com/posts/301101-rails-fb-revoking-permissions&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://azhen.logdown.com/posts/301101-rails-fb-revoking-permissions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Rails 4 OmniAuth using Devise: &lt;a href=&quot;http://sourcey.com/rails-4-omniauth-using-devise-with-twitter-facebook-and-linkedin/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;有 Facebook, Twitter, Linkedin 的教學文章&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/program/Facebookcoke.jpg&quot; alt=&quot;Devise 使用 Facebook 註冊與登入&quot; title=&quot;Pic by Facebookcoke&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　在 Devise 下，使用 Facebook 註冊與登入。&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　相信大家都很熟練 &lt;a href=&quot;https://github.com/plataformatec/devise&quot;&gt;&lt;strong&gt;Devise&lt;/strong&gt;&lt;/a&gt; 這個 Gem 的使用者機制，當然除了一般的註冊申請帳號外，最方便是要能與各大社交平台有所連結；而 Devise 中透過 &lt;a href=&quot;https://github.com/intridea/omniauth&quot;&gt;&lt;strong&gt;OmniAuth&lt;/strong&gt;&lt;/a&gt; 快速地串接 Facebook、google、github… 等，以下就筆記一下如何使用 Facebook 註冊登入！&lt;/p&gt;
&lt;h1 id=&quot;開發版本與環境&quot;&gt;&lt;a href=&quot;#開發版本與環境&quot; class=&quot;headerlink&quot; title=&quot;開發版本與環境&quot;&gt;&lt;/a&gt;&lt;strong&gt;開發版本與環境&lt;/strong&gt;&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;　　Ruby  : v2.3.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　Rails : v4.2.5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　IDE   : Cloud 9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Programmer" scheme="http://georgiowan.github.io/categories/Programmer/"/>
    
    
      <category term="rubyonrails" scheme="http://georgiowan.github.io/tags/rubyonrails/"/>
    
      <category term="rails" scheme="http://georgiowan.github.io/tags/rails/"/>
    
      <category term="omniauth" scheme="http://georgiowan.github.io/tags/omniauth/"/>
    
      <category term="devise" scheme="http://georgiowan.github.io/tags/devise/"/>
    
      <category term="koala" scheme="http://georgiowan.github.io/tags/koala/"/>
    
      <category term="facebook" scheme="http://georgiowan.github.io/tags/facebook/"/>
    
  </entry>
  
  <entry>
    <title>[Ruby] 使用 RVM 管理 ROR 開發環境</title>
    <link href="http://georgiowan.github.io/2016/ruby-rvm-management-ror-development-environment/"/>
    <id>http://georgiowan.github.io/2016/ruby-rvm-management-ror-development-environment/</id>
    <published>2016-05-18T14:37:00.000Z</published>
    <updated>2016-05-25T06:59:57.611Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/program/rvm-logo-all-happy.png&quot; alt=&quot;使用 RVM 管理 ROR 開發環境&quot; title=&quot;Pic by RVM&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　有鑒於一些好朋友想知道怎麼管理 ROR 的開發環境，所以重新整理了一下在 Ubuntu 上使用 RVM 管理 Ruby 和 Rails 的小筆記！希望能幫助到需要的你唷！&lt;/p&gt;
&lt;h1 id=&quot;開發版本與環境&quot;&gt;&lt;a href=&quot;#開發版本與環境&quot; class=&quot;headerlink&quot; title=&quot;開發版本與環境&quot;&gt;&lt;/a&gt;&lt;strong&gt;開發版本與環境&lt;/strong&gt;&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;　　VMware Workstation 12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　Ubuntu: 15.04(64-bit)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;筆記&quot;&gt;&lt;a href=&quot;#筆記&quot; class=&quot;headerlink&quot; title=&quot;筆記&quot;&gt;&lt;/a&gt;&lt;strong&gt;筆記&lt;/strong&gt;&lt;/h1&gt;&lt;h3 id=&quot;1-什麼是-Gem&quot;&gt;&lt;a href=&quot;#1-什麼是-Gem&quot; class=&quot;headerlink&quot; title=&quot;1. 什麼是 Gem ?&quot;&gt;&lt;/a&gt;1. 什麼是 Gem ?&lt;/h3&gt;&lt;p&gt;　　不是鄧紫棋！不是鄧紫棋！不是鄧紫棋！&lt;/p&gt;
&lt;p&gt;　　不知道大家是不是和我一樣，在什麼都還不了解的情況下，迫切的想知道 Gem 在 ROR 世界裡究竟扮演著什麼角色，一估狗 Gem，卻跑出一堆鄧紫棋XDD&lt;/p&gt;
&lt;p&gt;　　在 Ruby 的世界裡，Gem 如其名，就是一顆一顆的寶石，而 Ruby 會由很多的 Gem 點綴成你要的樣子，好比如果你想要你的 Ruby 有黃色光芒，你就得裝上會散發黃色光芒的 Gem；我把 Gem 看作是 Ruby 的套件，就像是 npm 中的 module，需要什麼樣的功能，我們就掛上什麼樣的套件。&lt;/p&gt;
&lt;h3 id=&quot;2-什麼是-RVM&quot;&gt;&lt;a href=&quot;#2-什麼是-RVM&quot; class=&quot;headerlink&quot; title=&quot;2. 什麼是 RVM ?&quot;&gt;&lt;/a&gt;2. 什麼是 RVM ?&lt;/h3&gt;&lt;p&gt;　　Ruby Version Manager ( &lt;a href=&quot;https://rvm.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RVM&lt;/a&gt; )，顧名思義就是一個&lt;strong&gt;管理 Ruby 版本的工具&lt;/strong&gt;，這是一個 command-line 的工具，也就是說只要下下指令，就能簡單的切換和管理 Ruby 版本；而每個 Ruby 版本都會有自己的 Gemset (就是一堆的 Gem)，所以透過 RVM 也可以管理每個 Ruby 版本下，該用哪一套 Gemset ( 由於 Rails 就是一個 Gem，所以我們可以由安裝的 Rails 版本來分類 Gemset)。&lt;/p&gt;
&lt;h3 id=&quot;3-安裝-RVM&quot;&gt;&lt;a href=&quot;#3-安裝-RVM&quot; class=&quot;headerlink&quot; title=&quot;3. 安裝 RVM&quot;&gt;&lt;/a&gt;3. 安裝 RVM&lt;/h3&gt;&lt;h4 id=&quot;步驟一、-在安裝-RVM-之前，你應該先裝好-curl。&quot;&gt;&lt;a href=&quot;#步驟一、-在安裝-RVM-之前，你應該先裝好-curl。&quot; class=&quot;headerlink&quot; title=&quot;步驟一、 在安裝 RVM 之前，你應該先裝好 curl。&quot;&gt;&lt;/a&gt;步驟一、 在安裝 RVM 之前，你應該先裝好 curl。&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;　　sudo apt-get update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　sudo apt-get install -y curl build-essential&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;步驟二、-參考-RVM-官方網站，下這兩道神奇咒語，就安裝好了！&quot;&gt;&lt;a href=&quot;#步驟二、-參考-RVM-官方網站，下這兩道神奇咒語，就安裝好了！&quot; class=&quot;headerlink&quot; title=&quot;步驟二、 參考 RVM 官方網站，下這兩道神奇咒語，就安裝好了！&quot;&gt;&lt;/a&gt;步驟二、 參考 RVM 官方網站，下這兩道神奇咒語，就安裝好了！&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;　　gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　curl -sSL https://get.rvm.io | bash -s stable&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;　　安裝完後記得重開或 reload Terminal。&lt;/p&gt;
&lt;h3 id=&quot;4-安裝-Ruby-及-RVM-指令&quot;&gt;&lt;a href=&quot;#4-安裝-Ruby-及-RVM-指令&quot; class=&quot;headerlink&quot; title=&quot;4. 安裝 Ruby 及 RVM 指令&quot;&gt;&lt;/a&gt;4. 安裝 Ruby 及 RVM 指令&lt;/h3&gt;&lt;p&gt;　　透過 RVM 安裝 Ruby 很簡單：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;　　rvm install 2.3.0        # 安裝 Ruby 2.3.0 ( 版本號可自選 )&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　　下面筆記一些 RVM 的指令：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;　　rvm system               # 切回系統安裝的 Ruby ( 不建議使用 )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm list    　　　　      # 列出已經安裝的 Ruby 版本 (* 預設，=&amp;gt; 正在使用，=* 正在使用且為預設，)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm list known           # 列出 RVM 目前所有可安裝的 Ruby 版本&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm use 2.3.0            # 切換至輸入的版本&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm use 2.3.0 --default  # 切換至輸入的版本，並設為預設&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm reinstall 2.3.0      # 重新安裝該版本&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm info                 # 目前使用的 Ruby 相關資訊&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　　由於，每個 Ruby 版本下，都各自有不同的 Gem，這時我們就可以透過 RVM 的 Gemset 來作管理和切換：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;　　rvm gemset               # 查看指令說明&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm gemset list          # 列出目前使用 Ruby 的 Gemset&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm gemset list_all      # 列出所有安裝 Ruby 的 Gemset&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm gemset create xxx    # 建立名為 xxx 的 gemset&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm gemset use xxx       # 使用 gemset xxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm gemset empty xxx     # 清空 gemset xxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm gemset delete xxx    # 刪除 gemset xxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm gemset copy xxx yyy  # 將 xxx 的內容 copy 到 yyy (兩者需都要存在)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm gemset rename xxx zzz# 將 xxx 更名為 zzz&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;5-安裝-Rails&quot;&gt;&lt;a href=&quot;#5-安裝-Rails&quot; class=&quot;headerlink&quot; title=&quot;5. 安裝 Rails&quot;&gt;&lt;/a&gt;5. 安裝 Rails&lt;/h3&gt;&lt;p&gt;　　只要選定好要使用的 Gemset 後，下 &lt;code&gt;gem install rails&lt;/code&gt; 安裝 rails 即可。&lt;/p&gt;
&lt;p&gt;　　這邊稍微提一下，我們可以也利用安裝的 Rails 版本來區分 Gemset，例如：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;　　rvm gemset create rails_4.2.6  # 建立一個　rails_4.2.6 Gemset&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　rvm gemset use rails_4.2.6     # 使用 rails_4.2.6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　gem install rails 4.2.6        # 在此 Gemset 下安裝 Rails 4.2.6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　　這樣我們就很清楚的知道，這個 Gemset 的 Rails 開發環境是版本 4.2.6。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;註：其實 Ruby 版控上，除了 RVM 外，也很多人使用 rbenv，教學請參考 &lt;a href=&quot;https://ruby-china.org/wiki/rbenv-guide&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Ruby China 這篇&lt;/a&gt;，由於沒用過，就不多提了！&lt;br&gt;　　而我會選擇 RVM，除了簡單易學易用外，還有一點就是，目前我在使用的 Cloud IDE &lt;a href=&quot;https://c9.io&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Cloud 9&lt;/a&gt; 上預設的就是 RVM，有興趣也可以使用 Cloud 9 作開發喔！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That’s it, &lt;strong&gt;DONE!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;【參考資料】&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RailsFun：&lt;a href=&quot;http://railsfun.tw/t/rvm/28&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://railsfun.tw/t/rvm/28&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;RVM：&lt;a href=&quot;https://rvm.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://rvm.io/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Passenger Library：&lt;a href=&quot;https://www.phusionpassenger.com/library/walkthroughs/deploy/ruby/ownserver/standalone/oss/install_language_runtime.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ruby install language runtime&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/program/rvm-logo-all-happy.png&quot; alt=&quot;使用 RVM 管理 ROR 開發環境&quot; title=&quot;Pic by RVM&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　有鑒於一些好朋友想知道怎麼管理 ROR 的開發環境，所以重新整理了一下在 Ubuntu 上使用 RVM 管理 Ruby 和 Rails 的小筆記！希望能幫助到需要的你唷！&lt;/p&gt;
&lt;h1 id=&quot;開發版本與環境&quot;&gt;&lt;a href=&quot;#開發版本與環境&quot; class=&quot;headerlink&quot; title=&quot;開發版本與環境&quot;&gt;&lt;/a&gt;&lt;strong&gt;開發版本與環境&lt;/strong&gt;&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;　　VMware Workstation 12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　Ubuntu: 15.04(64-bit)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Programmer" scheme="http://georgiowan.github.io/categories/Programmer/"/>
    
    
      <category term="rubyonrails" scheme="http://georgiowan.github.io/tags/rubyonrails/"/>
    
      <category term="gem" scheme="http://georgiowan.github.io/tags/gem/"/>
    
      <category term="ruby" scheme="http://georgiowan.github.io/tags/ruby/"/>
    
      <category term="rvm" scheme="http://georgiowan.github.io/tags/rvm/"/>
    
  </entry>
  
  <entry>
    <title>[Rails] 寄信小札記 - via ActionMailer</title>
    <link href="http://georgiowan.github.io/2016/rails-send-email-via-actionmailer/"/>
    <id>http://georgiowan.github.io/2016/rails-send-email-via-actionmailer/</id>
    <published>2016-05-12T10:34:00.000Z</published>
    <updated>2016-05-25T06:30:01.955Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/program/responsive-emails-intro.png&quot; alt=&quot;寄信小札記 - via ActionMailer&quot; title=&quot;Pic by foundation.zurb.com&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　在很多情況下都需要透過 E-mail 的功能，而我目前是需要寄送&lt;strong&gt;註冊認證信&lt;/strong&gt;給使用者，我們使用 ActionMailer 來整合 E-mail！&lt;/p&gt;
&lt;h1 id=&quot;開發版本與環境&quot;&gt;&lt;a href=&quot;#開發版本與環境&quot; class=&quot;headerlink&quot; title=&quot;開發版本與環境&quot;&gt;&lt;/a&gt;&lt;strong&gt;開發版本與環境&lt;/strong&gt;&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;Ruby ：v2.3.0
Rails：v4.2.5
IDE  ：Cloud 9
&lt;/code&gt;&lt;/pre&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;    
&lt;h1 id=&quot;筆記&quot;&gt;&lt;a href=&quot;#筆記&quot; class=&quot;headerlink&quot; title=&quot;筆記&quot;&gt;&lt;/a&gt;&lt;strong&gt;筆記&lt;/strong&gt;&lt;/h1&gt;&lt;h3 id=&quot;1-Devise-設定&quot;&gt;&lt;a href=&quot;#1-Devise-設定&quot; class=&quot;headerlink&quot; title=&quot;1. Devise 設定&quot;&gt;&lt;/a&gt;1. Devise 設定&lt;/h3&gt;&lt;p&gt;　　這邊我們只講寄信時，devise 需注意的設定，最簡單的方式，就是開啟 &lt;code&gt;Devise::Mailer&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;devise.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;config.mailer_sender = &lt;span class=&quot;string&quot;&gt;&#39;yourname &amp;lt;whateveryouwant@domain.com&amp;gt;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;comment&quot;&gt;# 設定 mailer_sender 會顯示在寄件人 (任何格式都可，但這種格式較不會被當作垃圾信件處理)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;config.mailer = &lt;span class=&quot;string&quot;&gt;&#39;Devise::Mailer&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;comment&quot;&gt;# 將註解拿掉後，就會由 devise 預設的 Mailer 寄信 (從 Devise::Mailer 作 deliver 調用 ActionMailer)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;2-ActionMailer-設定&quot;&gt;&lt;a href=&quot;#2-ActionMailer-設定&quot; class=&quot;headerlink&quot; title=&quot;2. ActionMailer 設定&quot;&gt;&lt;/a&gt;2. ActionMailer 設定&lt;/h3&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;development.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;config.action_mailer.raise_delivery_errors = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;comment&quot;&gt;# rails_delivery_errors 設定為 false 可讓寄信時的錯誤被忽略，如果要 debug 就設 true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;config.action_mailer.default_url_options = &amp;#123; &lt;span class=&quot;symbol&quot;&gt;host:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;http://localhost:3000&#39;&lt;/span&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;comment&quot;&gt;# 這邊填入的網址須要注意一下，他必須是絕對網址，且會被預設為 mail 中的 resource link&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;comment&quot;&gt;# 像我是用 devise 寄發驗證信，所以 confirmation_url(&lt;span class=&quot;doctag&quot;&gt;@resource&lt;/span&gt;, confirmation_token: &lt;span class=&quot;doctag&quot;&gt;@token&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;comment&quot;&gt;# 中的 &lt;span class=&quot;doctag&quot;&gt;@resource&lt;/span&gt; 就會是 http://localhost:3000&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;config.action_mailer.delivery_method = &lt;span class=&quot;symbol&quot;&gt;:smtp&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;comment&quot;&gt;# delivery_method 有三種寄信方式 :test、:sendmail 和 :smtp&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;comment&quot;&gt;# sendmail 須搭配 server 的 /user/bin/sendmail application&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;comment&quot;&gt;# 而這邊我是透過 mailgun(and gmail) 的 smtp 協定作寄信&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;config.action_mailer.smtp_settings = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　&lt;span class=&quot;symbol&quot;&gt;:address&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;smtp.gmail.com&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  　&lt;span class=&quot;symbol&quot;&gt;:port&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;587&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;symbol&quot;&gt;:domain&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;yourdomain.com&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;symbol&quot;&gt;:authentication&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;plain&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;symbol&quot;&gt;:user_name&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;yourgmail@gmail.com&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;symbol&quot;&gt;:password&lt;/span&gt; =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;yourpassword&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;symbol&quot;&gt;:enable_starttls_auto&lt;/span&gt; =&amp;gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;　　其實一般來說，我們不會將 smtp_settings 寫在程式碼裡，而是拆成另一個設定檔，便於管理在不同狀態下的設定：&lt;br&gt;&lt;figure class=&quot;highlight yaml&quot;&gt;&lt;figcaption&gt;&lt;span&gt;config/email.yml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;development:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  address:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;smtp.gmail.com&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  port:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;587&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  domain:&lt;/span&gt; &amp;lt;%=&lt;span class=&quot;ruby&quot;&gt;ENV[&lt;span class=&quot;string&quot;&gt;&#39;DOMAIN&#39;&lt;/span&gt;]&lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  authentication:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;plain&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  user_name:&lt;/span&gt; &amp;lt;%=&lt;span class=&quot;ruby&quot;&gt;ENV[&lt;span class=&quot;string&quot;&gt;&#39;GMAIL_USERNAME&#39;&lt;/span&gt;]&lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  password:&lt;/span&gt; &amp;lt;%=&lt;span class=&quot;ruby&quot;&gt;ENV[&lt;span class=&quot;string&quot;&gt;&#39;GMAIL_PASSWORD&#39;&lt;/span&gt;]&lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  enable_starttls_auto:&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;production:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  address:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;smtp.mailgun.org&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  port:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;587&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  domain:&lt;/span&gt; &amp;lt;%=&lt;span class=&quot;ruby&quot;&gt;ENV[&lt;span class=&quot;string&quot;&gt;&#39;DOMAIN&#39;&lt;/span&gt;]&lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  authentication:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;plain&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  user_name:&lt;/span&gt; &amp;lt;%=&lt;span class=&quot;ruby&quot;&gt;ENV[&lt;span class=&quot;string&quot;&gt;&#39;MAILGUN_USERNAME&#39;&lt;/span&gt;]&lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  password:&lt;/span&gt; &amp;lt;%=&lt;span class=&quot;ruby&quot;&gt;ENV[&lt;span class=&quot;string&quot;&gt;&#39;MAILGUN_PASSWORD&#39;&lt;/span&gt;]&lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  enable_starttls_auto:&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;註：cloud 9 中，多數 port 預設是 blocked，但依我自己的測試， mailgun 可透過 2525、587 來寄出信件，而 gmail 只能由 587 寄信。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;　　smtp_settings 的部分就可以修改成：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;config.action_mailer.smtp_settings = config_for(&lt;span class=&quot;symbol&quot;&gt;:email&lt;/span&gt;).symbolize_keys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;comment&quot;&gt;# config_for 會讀取 config 目錄下的 YAML 設定檔，由於 smtp_settings 需帶入 Symbol key&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;comment&quot;&gt;# 所以透過 .symbolize_keys 將 Hash 中的 String key 轉成 Symbol key&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;3-關於-email-yml&quot;&gt;&lt;a href=&quot;#3-關於-email-yml&quot; class=&quot;headerlink&quot; title=&quot;3. 關於 email.yml&quot;&gt;&lt;/a&gt;3. 關於 email.yml&lt;/h3&gt;&lt;p&gt;　　這邊來聊聊上面的 email.yml。&lt;/p&gt;
&lt;p&gt;　　ROR 環境預設有三個，&lt;code&gt;development&lt;/code&gt;、&lt;code&gt;production&lt;/code&gt;和&lt;code&gt;test&lt;/code&gt;，一般 &lt;code&gt;rails server&lt;/code&gt; 開啟環境預設是 development，我們可以透過 &lt;code&gt;-e&lt;/code&gt; 來變更啟動環境，例如 &lt;code&gt;rails s -e test&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;　　範例 email.yml 中，則表示：&lt;br&gt;　　　　&lt;strong&gt;development&lt;/strong&gt; 時，使用 &lt;strong&gt;gmail&lt;/strong&gt; 寄信。&lt;br&gt;　　　　&lt;strong&gt;production&lt;/strong&gt;  時，使用 &lt;strong&gt;mailgun&lt;/strong&gt; 寄信。&lt;/p&gt;
&lt;p&gt;　　在帳號(user_name)及密碼(password)這邊需要注意的是，如果你是將密碼寫死在設定中，記得一定要將 email.yml 加到 .gitignore 中，避免上傳到 github 自曝帳密；比較好的方法是使用 &lt;strong&gt;RAILS_ENV&lt;/strong&gt; 來取得環境設的變數，由於是寫在 yaml 中，所以我們寫成 &lt;code&gt;&amp;lt;%=ENV[&amp;#39;GMAIL_USERNAME&amp;#39;]%&amp;gt;&lt;/code&gt;，如果是寫在 .rb 中，則使用 &lt;code&gt;ENV[&amp;#39;GMAIL_USERNAME&amp;#39;]&lt;/code&gt; 即可。這樣我們就可以透過環境設的值作設定。&lt;/p&gt;
&lt;h3 id=&quot;4-設定-RAILS-ENV-變數&quot;&gt;&lt;a href=&quot;#4-設定-RAILS-ENV-變數&quot; class=&quot;headerlink&quot; title=&quot;4. 設定 RAILS_ENV 變數&quot;&gt;&lt;/a&gt;4. 設定 RAILS_ENV 變數&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;在 Ubuntu 下，可以編輯 &lt;strong&gt;~/.bashrc&lt;/strong&gt; 並加入以下作環境變數的設定 (在 Mac 下，則編輯 &lt;strong&gt;~/.profile&lt;/strong&gt;)：&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;　　export GMAIL_USERNAME=&amp;quot;yourgmail@gmail.com&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;　　以此類推，自行添加。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Heroku 的話，可直接在 &lt;code&gt;Settings &amp;gt; Config Variables&lt;/code&gt; 中添加，或用以下指令作設定：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;　　heroku config:add GMAIL_USERNAME=&amp;quot;yourgmail@gmail.com&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Cloud 9 的話，在 Runner 中有 ENV 可直接添加，或用 Ubuntu 的方式添加亦可 (因為 c9 的 ROR 環境是 Ubuntu )&lt;br&gt;&lt;img src=&quot;http://user-image.logdown.io/user/15003/blog/14192/post/732233/afBDlcF4QeWwP8kQZnF0_c9env.png&quot; alt=&quot;c9env.png&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;5-Gmail-密碼問題&quot;&gt;&lt;a href=&quot;#5-Gmail-密碼問題&quot; class=&quot;headerlink&quot; title=&quot;5. Gmail 密碼問題&quot;&gt;&lt;/a&gt;5. Gmail 密碼問題&lt;/h3&gt;&lt;p&gt;　　其實上述四個步驟後，就可以成功的寄出信件，但還是補充一下關於 gmail 有可能寄不出信的設定問題。&lt;br&gt;　　請先到 gmail 中作安全性設定，並取得密碼： &lt;code&gt;設定安全性&lt;/code&gt; → &lt;code&gt;二階段驗證&lt;/code&gt; → &lt;code&gt;應用程式密碼&lt;/code&gt;&lt;br&gt;　　而取得的&lt;strong&gt;應用程式密碼&lt;/strong&gt;就是要填入的密碼囉！&lt;/p&gt;
&lt;h1 id=&quot;後記&quot;&gt;&lt;a href=&quot;#後記&quot; class=&quot;headerlink&quot; title=&quot;後記&quot;&gt;&lt;/a&gt;&lt;strong&gt;後記&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　一開始我是想用 sendgrid 來作 smtp 送信，但真的試不出來也不知道什麼問題，有興趣的人可看&lt;a href=&quot;http://hyperneetprogrammer.hatenablog.com/entry/2016/03/01/080000&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;這篇文章&lt;/a&gt;，雖然是阿本仔寫的，但也是很清楚明瞭！&lt;/p&gt;
&lt;p&gt;That’s it, &lt;strong&gt;DONE!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;【參考資料】&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ruby on Rails 實戰聖經：&lt;a href=&quot;https://ihower.tw/rails4/actionmailer.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://ihower.tw/rails4/actionmailer.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;安全地設定 Rails 郵件密碼：&lt;a href=&quot;http://tsaith.github.io/an-quan-di-she-ding-rails-you-jian-mi-ma.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://tsaith.github.io/an-quan-di-she-ding-rails-you-jian-mi-ma.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Rails Environment Variables：&lt;a href=&quot;http://railsapps.github.io/rails-environment-variables.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://railsapps.github.io/rails-environment-variables.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;官方討論：&lt;a href=&quot;https://community.c9.io/t/how-can-i-send-email-from-my-app/1262&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://community.c9.io/t/how-can-i-send-email-from-my-app/1262&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/program/responsive-emails-intro.png&quot; alt=&quot;寄信小札記 - via ActionMailer&quot; title=&quot;Pic by foundation.zurb.com&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　在很多情況下都需要透過 E-mail 的功能，而我目前是需要寄送&lt;strong&gt;註冊認證信&lt;/strong&gt;給使用者，我們使用 ActionMailer 來整合 E-mail！&lt;/p&gt;
&lt;h1 id=&quot;開發版本與環境&quot;&gt;&lt;a href=&quot;#開發版本與環境&quot; class=&quot;headerlink&quot; title=&quot;開發版本與環境&quot;&gt;&lt;/a&gt;&lt;strong&gt;開發版本與環境&lt;/strong&gt;&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;Ruby ：v2.3.0
Rails：v4.2.5
IDE  ：Cloud 9
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="Programmer" scheme="http://georgiowan.github.io/categories/Programmer/"/>
    
    
      <category term="rubyonrails" scheme="http://georgiowan.github.io/tags/rubyonrails/"/>
    
      <category term="rails" scheme="http://georgiowan.github.io/tags/rails/"/>
    
      <category term="devise" scheme="http://georgiowan.github.io/tags/devise/"/>
    
      <category term="actionmailer" scheme="http://georgiowan.github.io/tags/actionmailer/"/>
    
      <category term="gmail" scheme="http://georgiowan.github.io/tags/gmail/"/>
    
      <category term="mailgun" scheme="http://georgiowan.github.io/tags/mailgun/"/>
    
      <category term="cloud9" scheme="http://georgiowan.github.io/tags/cloud9/"/>
    
  </entry>
  
  <entry>
    <title>[Rails] 讓 URL SEO 的方法 - via Meta_tags</title>
    <link href="http://georgiowan.github.io/2016/rails-url-seo-methods-via-meta-tags/"/>
    <id>http://georgiowan.github.io/2016/rails-url-seo-methods-via-meta-tags/</id>
    <published>2016-01-19T10:21:00.000Z</published>
    <updated>2016-05-25T06:23:46.803Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/program/SEO.jpg&quot; alt=&quot;讓 URL SEO 的方法 - via Meta_tags&quot; title=&quot;Pic by thenextweb.com&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　在之前我有筆記一篇&lt;a href=&quot;http://georgiowan-note.logdown.com/notes/307467/rails-url-path-without-id-via-friendly-id&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;透過 friendly_id 讓 url 不顯示 id&lt;/strong&gt;&lt;/a&gt;，除了美化 url 外，我們也可以透過設定 meta data 讓網站達到 SEO 的目的！&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　meta tag 及 data 的設定很重要，通常網站要能快速得被找到，或是透過分享時顯示重要(正確)的資訊，我們都得在這個部分下點功夫，本篇筆記一下在專案中所學到的相關知識和方法。  &lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;筆記&quot;&gt;&lt;a href=&quot;#筆記&quot; class=&quot;headerlink&quot; title=&quot;筆記&quot;&gt;&lt;/a&gt;&lt;strong&gt;筆記&lt;/strong&gt;&lt;/h1&gt;&lt;h3 id=&quot;1-什麼是-Meta-Tags-及-Meta-Data&quot;&gt;&lt;a href=&quot;#1-什麼是-Meta-Tags-及-Meta-Data&quot; class=&quot;headerlink&quot; title=&quot;1. 什麼是 Meta Tags 及 Meta Data&quot;&gt;&lt;/a&gt;1. 什麼是 Meta Tags 及 Meta Data&lt;/h3&gt;&lt;p&gt;　　Meta Data，在全球資訊網上，是指讓機器看得懂的、描述資訊內容的所有相關資訊。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Title Tag：&lt;/strong&gt;該頁標題，英文長度最好是 70 字元內，中文大約 40 字內，關鍵字盡量往前放，而每一頁的 &lt;code&gt;Title Tag&lt;/code&gt; 不要重覆為佳。如：&lt;code&gt;XXX美食部落格 :: 痞○幫&lt;/code&gt;、&lt;code&gt;XXX | Facebook&lt;/code&gt;、&lt;code&gt;徵傳單小弟 | oPartTime 讓打工變得更美好！&lt;/code&gt;等。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Description Tag：&lt;/strong&gt;該頁的敘述，包含標點符號英文約 150 字內，中文 12 字內為佳，此 &lt;code&gt;Description Tag&lt;/code&gt; 會出現在 Google 搜尋結果中，所以關鍵字的使用很重要，盡量往前擺。  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Canonical Url：&lt;/strong&gt;告訴搜尋引擎關於這個頁面的標準網址。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://developers.facebook.com/docs/sharing/opengraph&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Facebook OG&lt;/a&gt;：&lt;/strong&gt;此標籤中的資訊是專門給 Facebook 的，可透過設定 OG (Open Graph) 的內容敘述，調整分享時的&lt;strong&gt;縮圖、標題、敘述&lt;/strong&gt;等。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://dev.twitter.com/cards/overview&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Twitter Cards&lt;/a&gt;：&lt;/strong&gt;此標籤中的資訊則是專門給 Twitter 的，透過設定 Cards 的內容敘述，調整分享的資訊顯示。  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;2-Gem&quot;&gt;&lt;a href=&quot;#2-Gem&quot; class=&quot;headerlink&quot; title=&quot;2. Gem&quot;&gt;&lt;/a&gt;2. Gem&lt;/h3&gt;&lt;p&gt;　　在 rails 中，除了直接 code html 外，我們可以透過 &lt;a href=&quot;https://github.com/kpumuk/meta-tags&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;meta-tags&lt;/strong&gt;&lt;/a&gt; 這個 gem 來對 Meta Data 作設定。&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;Gemfile&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gem &lt;span class=&quot;string&quot;&gt;&#39;meta-tags&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;then, &lt;code&gt;bundle&lt;/code&gt; it.&lt;/p&gt;
&lt;h3 id=&quot;3-設定-Meta-Data&quot;&gt;&lt;a href=&quot;#3-設定-Meta-Data&quot; class=&quot;headerlink&quot; title=&quot;3. 設定 Meta Data&quot;&gt;&lt;/a&gt;3. 設定 Meta Data&lt;/h3&gt;&lt;p&gt;　　簡單的設定來說，可以透過 &lt;code&gt;set_meta_tags&lt;/code&gt; 作設定，如下：&lt;br&gt;&lt;figure class=&quot;highlight haml&quot;&gt;&lt;figcaption&gt;&lt;span&gt;page.html.haml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;=&lt;span class=&quot;ruby&quot;&gt; set_meta_tags &lt;span class=&quot;symbol&quot;&gt;title:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;此頁的抬頭&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;-# &amp;lt;title&amp;gt;此頁的抬頭&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;=&lt;span class=&quot;ruby&quot;&gt; set_meta_tags &lt;span class=&quot;symbol&quot;&gt;site:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;GeorgioWan&#39;&lt;/span&gt;s Note&lt;span class=&quot;string&quot;&gt;&#39;, title: &#39;&lt;/span&gt;此頁的抬頭&lt;span class=&quot;string&quot;&gt;&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;-# &amp;lt;title&amp;gt;GeorgioWan&#39;s Note | 此頁的抬頭&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;=&lt;span class=&quot;ruby&quot;&gt;&lt;span class=&quot;string&quot;&gt; set_meta_tags site: &#39;&lt;/span&gt;GeorgioWan&lt;span class=&quot;string&quot;&gt;&#39;s Note&#39;&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;title:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;此頁的抬頭&#39;&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;reverse:&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;-# &amp;lt;title&amp;gt;此頁的抬頭 | GeorgioWan&#39;s Note&amp;lt;/title&amp;gt; &amp;lt;= 較佳的作法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;=&lt;span class=&quot;ruby&quot;&gt; set_meta_tags &lt;span class=&quot;symbol&quot;&gt;description:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;此頁的敘述喔！&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;-# &amp;lt;meta name=&quot;description&quot; content=&quot;此頁的敘述喔！&quot; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-# 而這句&quot;此頁的敘述喔！&quot;會在 Google 搜尋找到網頁時，顯時於搜尋結果中。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-# 如下，搜尋 Facebook 時所出現的資訊範例。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://user-image.logdown.io/user/15003/blog/14192/post/441929/DS0MPZCcQnCS5Ac1gl8W_seo-1.jpg&quot; alt=&quot;搜尋 Facebook 之資訊範例&quot;&gt;&lt;/p&gt;
&lt;p&gt;　　在 Facebook OG 的簡單設定如下：&lt;br&gt;&lt;figure class=&quot;highlight haml&quot;&gt;&lt;figcaption&gt;&lt;span&gt;Facebook Open Graph&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;=&lt;span class=&quot;ruby&quot;&gt; set_meta_tags &lt;span class=&quot;symbol&quot;&gt;og:&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;    title: &#39;此頁的抬頭&#39;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    site_name: &#39;GeorgioWan&#39;s Note&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    type: &#39;website&#39;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    url: &#39;http://georgiowan-note.logdown.com/&#39;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    image: &#39;https://test.jpg&#39;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-# &amp;lt;meta property=&quot;og:title&quot; content=&quot;教你怎麼在Rails裡做好基本的SEO&quot;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-# &amp;lt;meta property=&quot;og:type&quot; content=&quot;website&quot;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-# &amp;lt;meta property=&quot;og:site_name&quot; content=&quot;好麻煩部落格&quot;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-# &amp;lt;meta property=&quot;og:url&quot; content=&quot;http://georgiowan-note.logdown.com/&quot;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-# &amp;lt;meta property=&quot;og:image&quot; content=&quot;https://test.jpg&quot;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　　由於目前沒有用到 Twitter Cards 所以也不方便多加敘述，詳情請至 &lt;a href=&quot;https://dev.twitter.com/cards/overview&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;Twitter dev&lt;/strong&gt;&lt;/a&gt; 欣賞 XDD&lt;/p&gt;
&lt;h3 id=&quot;4-Rails-設定-meta-tags-小技巧&quot;&gt;&lt;a href=&quot;#4-Rails-設定-meta-tags-小技巧&quot; class=&quot;headerlink&quot; title=&quot;4. Rails 設定 meta tags 小技巧&quot;&gt;&lt;/a&gt;4. Rails 設定 meta tags 小技巧&lt;/h3&gt;&lt;p&gt;　　如果每一頁都要手刻 meta tag 的話，就違背了 DRY 的原則了！為了符合此原則，我們可以透過定義一個設定動作的 Action，而後，在需要設定 meta data 的 Controller 中作 &lt;code&gt;before_action&lt;/code&gt; 即可，好像在繞口令，詳情見下文。&lt;/p&gt;
&lt;p&gt;　　(1) 先在 &lt;strong&gt;Application Controller&lt;/strong&gt; 中定義一個 Action：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;application_controller.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ApplicationController&lt;/span&gt; &amp;lt; ActionController::Base&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　before_action &lt;span class=&quot;symbol&quot;&gt;:prepare_meta_tags&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;if:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;request.get?&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　protected&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;prepare_meta_tags&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(options=&amp;#123;&amp;#125;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    site_name   = &lt;span class=&quot;string&quot;&gt;&quot;GeorgioWan&#39;s Note&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    title       = &lt;span class=&quot;string&quot;&gt;&quot;此頁的抬頭&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    description = &lt;span class=&quot;string&quot;&gt;&quot;此頁的敘述&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    image       = options[&lt;span class=&quot;symbol&quot;&gt;:image&lt;/span&gt;] &lt;span class=&quot;params&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;your-default-image-url&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    current_url = request.url&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defaults = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;symbol&quot;&gt;site:&lt;/span&gt;        site_name,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;symbol&quot;&gt;title:&lt;/span&gt;       title,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;symbol&quot;&gt;image:&lt;/span&gt;       image,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;symbol&quot;&gt;description:&lt;/span&gt; description,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;symbol&quot;&gt;canonical:&lt;/span&gt;   current_url,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;symbol&quot;&gt;keywords:&lt;/span&gt;    &lt;span class=&quot;string&quot;&gt;%w[這邊可以打些關鍵字]&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;symbol&quot;&gt;og:&lt;/span&gt;          &amp;#123;&lt;span class=&quot;symbol&quot;&gt;url:&lt;/span&gt; current_url,　　&lt;span class=&quot;comment&quot;&gt;# 設定 Facebook OG 預設資訊內容&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;symbol&quot;&gt;site_name:&lt;/span&gt; site_name,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;symbol&quot;&gt;title:&lt;/span&gt; title,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;symbol&quot;&gt;image:&lt;/span&gt; image,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;symbol&quot;&gt;description:&lt;/span&gt; description,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;symbol&quot;&gt;type:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;website&#39;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;　&lt;span class=&quot;comment&quot;&gt;# 此為預設資訊內容&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    options.reverse_merge!(defaults)　&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　&lt;span class=&quot;comment&quot;&gt;# 透過 options.reverse_merge! 讓其他 controller 中可作設定（若沒有額外設定就是預設）  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_meta_tags options&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# 最後透過 set_meta_tags 設定 meta data 資訊&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　　(2) 接著，在 layout 的 head 中使用 &lt;code&gt;display_meta_tags&lt;/code&gt; 設定每頁的 meta data：&lt;br&gt;&lt;figure class=&quot;highlight haml&quot;&gt;&lt;figcaption&gt;&lt;span&gt;application.html.haml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;%&lt;span class=&quot;selector-tag&quot;&gt;head&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  =&lt;span class=&quot;ruby&quot;&gt; display_meta_tags&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;  %&lt;span class=&quot;selector-tag&quot;&gt;meta&lt;/span&gt;(http-&lt;span class=&quot;attr&quot;&gt;equiv&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;X-UA-Compatible&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;content&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;IE=edge,chrome=1&quot;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;  -# 上面此段 meta 是設定 IE 的兼容性。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　　(3) 現在每一頁都會有 meta data 了，但內容都是預設的資訊，我們可以在 &lt;strong&gt;Controller&lt;/strong&gt; 中作設定：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;test_controller.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;TestsController&lt;/span&gt; &amp;lt; ApplicationController&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;index&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　prepare_meta_tags &lt;span class=&quot;symbol&quot;&gt;title:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;HERE IS TEST　INDEX&quot;&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;description:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;TEST INDEX DESCRIPTION.&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  　&lt;span class=&quot;comment&quot;&gt;# 透過 prepare_meta_tags 傳入想變更的 options&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  　@page_title       = &lt;span class=&quot;string&quot;&gt;&quot;HERE IS TEST INDEX&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  　@page_description = &lt;span class=&quot;string&quot;&gt;&quot;TEST INDEX DESCRIPTION.&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  　&lt;span class=&quot;comment&quot;&gt;# or 我們可以透過 &lt;span class=&quot;doctag&quot;&gt;@page&lt;/span&gt;_* 作 meta data 設定&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;show&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　@page_title       = &lt;span class=&quot;string&quot;&gt;&quot;HERE IS TEST SHOW&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  　@page_description = &lt;span class=&quot;string&quot;&gt;&quot;TEST SHOW DESCRIPTION.&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　prepare_meta_tags( &lt;span class=&quot;symbol&quot;&gt;og:&lt;/span&gt; &amp;#123; &lt;span class=&quot;symbol&quot;&gt;title:&lt;/span&gt; @page_title,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                             &lt;span class=&quot;symbol&quot;&gt;description:&lt;/span&gt; @page_description&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# 也可以對 og 作設定&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　　以上，就簡單的 SEO meta data 設定就完成了。 &lt;/p&gt;
&lt;p&gt;That’s it, &lt;strong&gt;DONE!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;【參考資料】&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;給 Rails Developer 的基本 SEO：&lt;a href=&quot;http://gogojimmy.net/2013/09/26/basic-seo-for-rails-developer/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://gogojimmy.net/2013/09/26/basic-seo-for-rails-developer/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Easy SEO meta data with meta-tags：&lt;a href=&quot;http://cookieshq.co.uk/posts/easy-seo-metatags-with-rails-4/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://cookieshq.co.uk/posts/easy-seo-metatags-with-rails-4/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;meta-tags：&lt;a href=&quot;https://github.com/kpumuk/meta-tags&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/kpumuk/meta-tags&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Open Graph：&lt;a href=&quot;http://ogp.me/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://ogp.me/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;讓 Facebook OG 取得正確縮圖：網址太長，請點&lt;a href=&quot;http://sweeteason.pixnet.net/blog/post/42228946-facebook-%E6%96%87%E7%AB%A0%E5%88%86%E4%BA%AB%E7%9A%84%E9%A0%90%E8%A6%BD%E5%9C%96%E7%89%87%EF%BC%8C%E9%A1%AF%E7%A4%BA%E7%82%BA%E5%AF%AC%E7%89%88%E5%A4%A7%E5%9C%96&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;這邊&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;reverse_merge API：&lt;a href=&quot;http://apidock.com/rails/Hash/reverse_merge&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://apidock.com/rails/Hash/reverse_merge&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/program/SEO.jpg&quot; alt=&quot;讓 URL SEO 的方法 - via Meta_tags&quot; title=&quot;Pic by thenextweb.com&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　在之前我有筆記一篇&lt;a href=&quot;http://georgiowan-note.logdown.com/notes/307467/rails-url-path-without-id-via-friendly-id&quot;&gt;&lt;strong&gt;透過 friendly_id 讓 url 不顯示 id&lt;/strong&gt;&lt;/a&gt;，除了美化 url 外，我們也可以透過設定 meta data 讓網站達到 SEO 的目的！&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　meta tag 及 data 的設定很重要，通常網站要能快速得被找到，或是透過分享時顯示重要(正確)的資訊，我們都得在這個部分下點功夫，本篇筆記一下在專案中所學到的相關知識和方法。  &lt;/p&gt;
    
    </summary>
    
      <category term="Programmer" scheme="http://georgiowan.github.io/categories/Programmer/"/>
    
    
      <category term="rails" scheme="http://georgiowan.github.io/tags/rails/"/>
    
      <category term="facebook" scheme="http://georgiowan.github.io/tags/facebook/"/>
    
      <category term="ruby" scheme="http://georgiowan.github.io/tags/ruby/"/>
    
      <category term="Metadata" scheme="http://georgiowan.github.io/tags/Metadata/"/>
    
      <category term="metatag" scheme="http://georgiowan.github.io/tags/metatag/"/>
    
      <category term="meta-tags" scheme="http://georgiowan.github.io/tags/meta-tags/"/>
    
      <category term="SEO" scheme="http://georgiowan.github.io/tags/SEO/"/>
    
      <category term="OpenGraph" scheme="http://georgiowan.github.io/tags/OpenGraph/"/>
    
  </entry>
  
  <entry>
    <title>[Rails] 解決 modal update 時 FB plugin (share, like) reload</title>
    <link href="http://georgiowan.github.io/2015/rails-solving-modal-update-fb-plugin-share-like-reload/"/>
    <id>http://georgiowan.github.io/2015/rails-solving-modal-update-fb-plugin-share-like-reload/</id>
    <published>2015-12-30T13:58:00.000Z</published>
    <updated>2016-05-25T06:17:13.371Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/program/rzv-illustration-facebook.jpg&quot; alt=&quot;解決 modal update 時 FB plugin (share, like) reload&quot; title=&quot;Pic by  Ingrid Hong&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　在開發的作品中，每篇貼文都希望能透過 &lt;strong&gt;fb share&lt;/strong&gt; 的功能，達到分享該文資訊和宣傳本作品的作用，所以決定在貼文中加入此一功能，讓使用者在宣傳自己的貼文時，也能夠替我們宣傳！&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　凡事與&lt;strong&gt;社群網站&lt;/strong&gt;接軌，有好無壞！&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;  
&lt;h1 id=&quot;筆記&quot;&gt;&lt;a href=&quot;#筆記&quot; class=&quot;headerlink&quot; title=&quot;筆記&quot;&gt;&lt;/a&gt;&lt;strong&gt;筆記&lt;/strong&gt;&lt;/h1&gt;&lt;h3 id=&quot;1-FB-plugin&quot;&gt;&lt;a href=&quot;#1-FB-plugin&quot; class=&quot;headerlink&quot; title=&quot;1. FB plugin&quot;&gt;&lt;/a&gt;1. FB plugin&lt;/h3&gt;&lt;p&gt;　　其實要使用這個功能非常簡單，只要到 &lt;a href=&quot;https://developers.facebook.com/docs/plugins/share-button&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;facebook developer&lt;/strong&gt;&lt;/a&gt; 按部就班的作，就可以完成此功能。&lt;/p&gt;
&lt;h3 id=&quot;2-Turbolinks-FB-plugin&quot;&gt;&lt;a href=&quot;#2-Turbolinks-FB-plugin&quot; class=&quot;headerlink&quot; title=&quot;2. Turbolinks + FB plugin&quot;&gt;&lt;/a&gt;2. Turbolinks + FB plugin&lt;/h3&gt;&lt;p&gt;　　在開發 rails 中常遇到 turbolinks 導致 header 中 js 沒有 reload 的問題，我們可以透過一些方法解決：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用 &lt;a href=&quot;https://github.com/kossnocorp/jquery.turbolinks&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;jquery-turbolinks gem&lt;/strong&gt;&lt;/a&gt; 解決 jquery 部份&lt;/li&gt;
&lt;li&gt;而 FB plugin 的解決方法則如下：&lt;figure class=&quot;highlight coffeescript&quot;&gt;&lt;figcaption&gt;&lt;span&gt;fb_plugin.coffee&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ -&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;comment&quot;&gt;# 讀取 FB sdk.js&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　loadFacebookSDK()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;comment&quot;&gt;# 檢查是否 bind 過 fb-root，若否則執行&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　bindFacebookEvents() &lt;span class=&quot;keyword&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.fbEventsBound&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title&quot;&gt;bindFacebookEvents&lt;/span&gt; = -&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　$(&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　&lt;span class=&quot;comment&quot;&gt;# 將 fb-root detach 起來&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　.&lt;span class=&quot;literal&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;page:fetch&#39;&lt;/span&gt;, saveFacebookRoot)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　&lt;span class=&quot;comment&quot;&gt;# 放回 fb-root&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　.&lt;span class=&quot;literal&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;page:change&#39;&lt;/span&gt;, restoreFacebookRoot)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　&lt;span class=&quot;comment&quot;&gt;# 用 FB.XFBML.parse() re-parse all of the XFBML on a page&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　.&lt;span class=&quot;literal&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;page:load&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;-&amp;gt;&lt;/span&gt; FB?.XFBML.parse())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　@fbEventsBound = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title&quot;&gt;saveFacebookRoot&lt;/span&gt; = -&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; $(&lt;span class=&quot;string&quot;&gt;&#39;#fb-root&#39;&lt;/span&gt;).length&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　@fbRoot = $(&lt;span class=&quot;string&quot;&gt;&#39;#fb-root&#39;&lt;/span&gt;).detach()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title&quot;&gt;restoreFacebookRoot&lt;/span&gt; = -&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; @fbRoot?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; $(&lt;span class=&quot;string&quot;&gt;&#39;#fb-root&#39;&lt;/span&gt;).length&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　　$(&lt;span class=&quot;string&quot;&gt;&#39;#fb-root&#39;&lt;/span&gt;).replaceWith @fbRoot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　　$(&lt;span class=&quot;string&quot;&gt;&#39;body&#39;&lt;/span&gt;).append @fbRoot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title&quot;&gt;loadFacebookSDK&lt;/span&gt; = -&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.fbAsyncInit = initializeFacebookSDK&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　$.getScript(&lt;span class=&quot;string&quot;&gt;&quot;//connect.facebook.net/zh_TW/all.js#xfbml=1&amp;amp;version=v2.5&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title&quot;&gt;initializeFacebookSDK&lt;/span&gt; = -&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　FB.init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　appId  : &lt;span class=&quot;string&quot;&gt;&#39;YOUR_APP_ID&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　status : &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　cookie : &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　xfbml  : &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;3-Modal-popup-FB-plugin&quot;&gt;&lt;a href=&quot;#3-Modal-popup-FB-plugin&quot; class=&quot;headerlink&quot; title=&quot;3. Modal(popup) + FB plugin&quot;&gt;&lt;/a&gt;3. Modal(popup) + FB plugin&lt;/h3&gt;&lt;p&gt;　　然而，我遇到的問題是，當我使用 Bootstrap modal 作文章 preview 時，FB share button 只有在第一次 modal show 會出現，而檢視其他 modal 時並沒有觸發更新，導致 FB plugin 失效了！目前我的解決辦法就是在 modal show 時，利用 &lt;strong&gt;FB.XFBML.parse()&lt;/strong&gt; 刷新，以以上的程式碼為範例，於 &lt;code&gt;$ -&amp;gt;&lt;/code&gt; 中加入：&lt;br&gt;&lt;figure class=&quot;highlight coffeescript&quot;&gt;&lt;figcaption&gt;&lt;span&gt;fb_plugin.coffee&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ -&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　loadFacebookSDK()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　bindFacebookEvents() &lt;span class=&quot;keyword&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.fbEventsBound&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　$(&lt;span class=&quot;string&quot;&gt;&#39;#myModal&#39;&lt;/span&gt;).&lt;span class=&quot;literal&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;show.bs.modal&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　FB.XFBML.parse()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;4-偷吃步？&quot;&gt;&lt;a href=&quot;#4-偷吃步？&quot; class=&quot;headerlink&quot; title=&quot;4. 偷吃步？&quot;&gt;&lt;/a&gt;4. 偷吃步？&lt;/h3&gt;&lt;p&gt;　　當然，如果想快速的達到這個目的，也不用額外寫一支 script，可以在需要用到此 plugin 的頁面直接嵌入 script 就好。&lt;br&gt;&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　// 官方 plugin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　(function(d, s, id) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　var js, fjs = d.getElementsByTagName(s)[0];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　if (d.getElementById(id)) return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　js = d.createElement(s); js.id = id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　js.src = &quot;//connect.facebook.net/zh_TW/sdk.js#xfbml=1&amp;amp;version=v2.5&quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　fjs.parentNode.insertBefore(js, fjs);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&amp;#125;(document, &#39;script&#39;, &#39;facebook-jssdk&#39;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　// 讀取此頁時直接利用 FB.XFBML.parse() 刷新&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　$(FB.XFBML.parse());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;That’s it, &lt;strong&gt;DONE!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;【參考資料】&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Facebook for developers(share button): &lt;a href=&quot;https://developers.facebook.com/docs/plugins/share-button&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://developers.facebook.com/docs/plugins/share-button&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Facebook web sdk: &lt;a href=&quot;https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;FB plugin with turbolinks solution: &lt;a href=&quot;http://reed.github.io/turbolinks-compatibility/facebook.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://reed.github.io/turbolinks-compatibility/facebook.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;FB plugin with turblinks (ADZ blog): &lt;a href=&quot;http://adz.cool/posts/181188-rails-notes-turbolinks-facebook-sdk&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://adz.cool/posts/181188-rails-notes-turbolinks-facebook-sdk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Google, FB, twitter turbolinks: &lt;a href=&quot;http://www.workabroad.jp/posts/2083&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.workabroad.jp/posts/2083&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/program/rzv-illustration-facebook.jpg&quot; alt=&quot;解決 modal update 時 FB plugin (share, like) reload&quot; title=&quot;Pic by  Ingrid Hong&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　在開發的作品中，每篇貼文都希望能透過 &lt;strong&gt;fb share&lt;/strong&gt; 的功能，達到分享該文資訊和宣傳本作品的作用，所以決定在貼文中加入此一功能，讓使用者在宣傳自己的貼文時，也能夠替我們宣傳！&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　凡事與&lt;strong&gt;社群網站&lt;/strong&gt;接軌，有好無壞！&lt;/p&gt;
    
    </summary>
    
      <category term="Programmer" scheme="http://georgiowan.github.io/categories/Programmer/"/>
    
    
      <category term="rubyonrails" scheme="http://georgiowan.github.io/tags/rubyonrails/"/>
    
      <category term="rails" scheme="http://georgiowan.github.io/tags/rails/"/>
    
      <category term="facebook" scheme="http://georgiowan.github.io/tags/facebook/"/>
    
      <category term="turbolinks" scheme="http://georgiowan.github.io/tags/turbolinks/"/>
    
      <category term="FacebookPlugin" scheme="http://georgiowan.github.io/tags/FacebookPlugin/"/>
    
      <category term="FacebookShare" scheme="http://georgiowan.github.io/tags/FacebookShare/"/>
    
  </entry>
  
  <entry>
    <title>[Rails] 如何 render .js，respond_to 小筆記</title>
    <link href="http://georgiowan.github.io/2015/rails-how-do-i-render-js-respond-small-note/"/>
    <id>http://georgiowan.github.io/2015/rails-how-do-i-render-js-respond-small-note/</id>
    <published>2015-12-28T10:53:00.000Z</published>
    <updated>2016-05-25T06:10:52.959Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/program/Talk.jpg&quot; alt=&quot;respond_to 小筆記&quot; title=&quot;Pic by devicepharm.com&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　很多地方都會需要用到 render 的技巧，在這邊由於要實作 &lt;strong&gt;endless page&lt;/strong&gt;(或稱&lt;strong&gt;infinite scrolling&lt;/strong&gt;)，所以需要動態的透過 ender ujs 來新增頁面中的資料。&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　使用 RoR 開發即將步入第四個月，對於 ujs 懵懵懂懂，所以在這邊小筆記一下專案中所學習的！&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;筆記&quot;&gt;&lt;a href=&quot;#筆記&quot; class=&quot;headerlink&quot; title=&quot;筆記&quot;&gt;&lt;/a&gt;&lt;strong&gt;筆記&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　在 controller 中，我們可以透過撰寫 respond_to 指定要 render 的內容，如：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;examples_controller.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ExamplesController&lt;/span&gt; &amp;lt; ApplicationController&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;example&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    respond_to &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;|format|&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      format.js &lt;span class=&quot;comment&quot;&gt;# 如果 client ask for js -&amp;gt; 就 return |format|.js&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　　Controller method(action) 透過 &lt;a href=&quot;http://apidock.com/rails/Mime&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Default Rails mime-types&lt;/a&gt; 回傳相對格式作 render，上面的範例中，就會找到 &lt;code&gt;/app/views/examples/example.js.erb&lt;/code&gt; 作 render。我們也可以透過&lt;code&gt;block {}&lt;/code&gt;來作動作或檔案的 render，如下：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;respond_to &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;|format|&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	format.js &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;# 在 client 端執行 alert (javascript)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;string&quot;&gt;&quot;alert(&#39;Hello Rails&#39;);&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;# page not fount&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 		&lt;span class=&quot;symbol&quot;&gt;status:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;404&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;# render /app/views/your-controller/test_action.js.erb&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 		&lt;span class=&quot;symbol&quot;&gt;action:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;test_action&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;# 將 test_item 以 json 格式 render &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;symbol&quot;&gt;json:&lt;/span&gt;		@test_item,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;# 找到指定的檔案作 render&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;symbol&quot;&gt;file:&lt;/span&gt;		filename,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;# 直接 render text: Hello&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;symbol&quot;&gt;text:&lt;/span&gt;		&lt;span class=&quot;string&quot;&gt;&quot;Hello&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;That’s it, &lt;strong&gt;DONE!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;【參考資料】&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Rails respond to format.js api: &lt;a href=&quot;http://stackoverflow.com/questions/13545148/rails-respond-to-format-js-api&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://stackoverflow.com/questions/13545148/rails-respond-to-format-js-api&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Rails Guides: &lt;a href=&quot;http://guides.rubyonrails.org/layouts_and_rendering.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://guides.rubyonrails.org/layouts_and_rendering.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/program/Talk.jpg&quot; alt=&quot;respond_to 小筆記&quot; title=&quot;Pic by devicepharm.com&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　很多地方都會需要用到 render 的技巧，在這邊由於要實作 &lt;strong&gt;endless page&lt;/strong&gt;(或稱&lt;strong&gt;infinite scrolling&lt;/strong&gt;)，所以需要動態的透過 ender ujs 來新增頁面中的資料。&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　使用 RoR 開發即將步入第四個月，對於 ujs 懵懵懂懂，所以在這邊小筆記一下專案中所學習的！&lt;/p&gt;
    
    </summary>
    
      <category term="Programmer" scheme="http://georgiowan.github.io/categories/Programmer/"/>
    
    
      <category term="rubyonrails" scheme="http://georgiowan.github.io/tags/rubyonrails/"/>
    
      <category term="rails" scheme="http://georgiowan.github.io/tags/rails/"/>
    
      <category term="respond_to" scheme="http://georgiowan.github.io/tags/respond-to/"/>
    
      <category term="render" scheme="http://georgiowan.github.io/tags/render/"/>
    
      <category term="ujs" scheme="http://georgiowan.github.io/tags/ujs/"/>
    
  </entry>
  
  <entry>
    <title>[Rails] 使用支援markdown編輯器 - via Pagedown-Bootstrap-Rails</title>
    <link href="http://georgiowan.github.io/2015/rails-supports-markdown-editor-via-pagedown-bootstrap-rails/"/>
    <id>http://georgiowan.github.io/2015/rails-supports-markdown-editor-via-pagedown-bootstrap-rails/</id>
    <published>2015-11-11T18:16:00.000Z</published>
    <updated>2016-05-25T05:58:06.767Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/program/markdown-tools.jpg&quot; alt=&quot;上傳圖片功能 - via CarrierWave&quot; title=&quot;Pic by mashable.com&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　為了讓自己寫的網站擁有編輯器的功能，可以使用一些現成的編輯器來實現，如 &lt;a href=&quot;https://github.com/galetahub/ckeditor&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;ckeditor&lt;/strong&gt;&lt;/a&gt;、&lt;a href=&quot;https://github.com/tsechingho/ckeditor-rails&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;ckeditor-rails&lt;/strong&gt;&lt;/a&gt;、&lt;a href=&quot;https://github.com/ujifgc/pagedown&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;pagedown&lt;/strong&gt;&lt;/a&gt; 諸如此類，由於已經喜歡上寫 markdown 的感覺，所以選了 &lt;a href=&quot;https://github.com/hughevans/pagedown-bootstrap-rails&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;pagedown-bootstrap-rails&lt;/strong&gt;&lt;/a&gt; 來實現我的功能。&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　了解 &lt;a href=&quot;http://markdown.tw/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;Markdown&lt;/strong&gt;&lt;/a&gt; 怎麼寫之後，就習慣使用支援 markdown 的編輯器了嗎？&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;  
&lt;h1 id=&quot;筆記&quot;&gt;&lt;a href=&quot;#筆記&quot; class=&quot;headerlink&quot; title=&quot;筆記&quot;&gt;&lt;/a&gt;&lt;strong&gt;筆記&lt;/strong&gt;&lt;/h1&gt;&lt;h3 id=&quot;1-Gem&quot;&gt;&lt;a href=&quot;#1-Gem&quot; class=&quot;headerlink&quot; title=&quot;1. Gem&quot;&gt;&lt;/a&gt;1. Gem&lt;/h3&gt;&lt;p&gt;　　在使用 pagedown-bootstrap-rails 這個 gem 時，我們也得裝 &lt;a href=&quot;https://github.com/twbs/bootstrap-sass&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;Bootstrap3(Sass)&lt;/strong&gt;&lt;/a&gt; 和 &lt;a href=&quot;https://github.com/bokmann/font-awesome-rails&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;Font Awesome&lt;/strong&gt;&lt;/a&gt;：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gem &lt;span class=&quot;string&quot;&gt;&#39;bootstrap-sass&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gem &lt;span class=&quot;string&quot;&gt;&#39;font-awesome-rails&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gem &lt;span class=&quot;string&quot;&gt;&#39;pagedown-bootstrap-rails&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;2-scss、js-設定&quot;&gt;&lt;a href=&quot;#2-scss、js-設定&quot; class=&quot;headerlink&quot; title=&quot;2. scss、js 設定&quot;&gt;&lt;/a&gt;2. scss、js 設定&lt;/h3&gt;&lt;p&gt;　　scss 的設定為：&lt;br&gt;&lt;figure class=&quot;highlight scss&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/assets/stylesheets/application.scss&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;bootstrap-sprockets&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;bootstrap&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;font-awesome&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;pagedown_bootstrap&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　　js 中加入已下：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/assets/stylesheets/application.js&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;//= require bootstrap-sprockets&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//= require pagedown_bootstrap&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//= require pagedown_init&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;NOTE: bootstrap-sprockets 加在 //= require jquery 後，pagedown_init 加在 pagedown_bootstrap 後&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;3-SimpleForm-中使用-pagedown&quot;&gt;&lt;a href=&quot;#3-SimpleForm-中使用-pagedown&quot; class=&quot;headerlink&quot; title=&quot;3. SimpleForm 中使用 pagedown&quot;&gt;&lt;/a&gt;3. SimpleForm 中使用 pagedown&lt;/h3&gt;&lt;p&gt;　　先在 app 中加入 input 與 output 設定：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/inputs/pagedown_input.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;PagedownInput&lt;/span&gt; &amp;lt; SimpleForm::Inputs::&lt;span class=&quot;title&quot;&gt;TextInput&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;input&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    out = &lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;div id=\&quot;wmd-button-bar-&lt;span class=&quot;subst&quot;&gt;#&amp;#123;attribute_name&amp;#125;&lt;/span&gt;\&quot;&amp;gt;&amp;lt;/div&amp;gt;&lt;span class=&quot;subst&quot;&gt;#&amp;#123;wmd_input&amp;#125;&lt;/span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; input_html_options[&lt;span class=&quot;symbol&quot;&gt;:preview&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      out &amp;lt;&amp;lt; &lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;div id=\&quot;wmd-preview-&lt;span class=&quot;subst&quot;&gt;#&amp;#123;attribute_name&amp;#125;&lt;/span&gt;\&quot; class=\&quot;wmd-preview\&quot;&amp;gt;&amp;lt;/div&amp;gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    out.html_safe&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  private&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;wmd_input&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @builder.text_area(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      attribute_name,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      input_html_options.merge(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt;: &#39;&lt;span class=&quot;title&quot;&gt;wmd&lt;/span&gt;-&lt;span class=&quot;title&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;form&lt;/span&gt;-&lt;span class=&quot;title&quot;&gt;control&lt;/span&gt;&#39;, &lt;span class=&quot;title&quot;&gt;id&lt;/span&gt;: &quot;&lt;span class=&quot;title&quot;&gt;wmd&lt;/span&gt;-&lt;span class=&quot;title&quot;&gt;input&lt;/span&gt;-&lt;span class=&quot;comment&quot;&gt;#&amp;#123;attribute_name&amp;#125;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　　如此一來，在 simple form 中就可以透過 &lt;code&gt;as: :pagedown&lt;/code&gt; 調用 pagedown editor&lt;br&gt;&lt;figure class=&quot;highlight haml&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/views/examples/_form.html.haml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;=&lt;span class=&quot;ruby&quot;&gt; f.input &lt;span class=&quot;symbol&quot;&gt;:description&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;as:&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;:pagedown&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;input_html:&lt;/span&gt; &amp;#123; &lt;span class=&quot;symbol&quot;&gt;preview:&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;rows:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt; &amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　　以上，就可以使用 Pagedown Editor 了！精美如下圖：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/program/pagedown-in-rails.png&quot; alt=&quot;pagedown-in-rails.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;4-顯示-markdown-型態資料&quot;&gt;&lt;a href=&quot;#4-顯示-markdown-型態資料&quot; class=&quot;headerlink&quot; title=&quot;4. 顯示 markdown 型態資料&quot;&gt;&lt;/a&gt;4. 顯示 markdown 型態資料&lt;/h3&gt;&lt;p&gt;　　在使用 pagedown editor 輸入完文章或內容後，我們呈現時需要把內容由 &lt;strong&gt;Markdown&lt;/strong&gt; 轉成 &lt;strong&gt;HTML&lt;/strong&gt;，我們利用 javascript 將內容透過 &lt;code&gt;Mardown.Converter&lt;/code&gt; 轉成 html 即可！主要有兩個步驟：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(1) 於 js 中撰寫 &lt;code&gt;.wmd-output&lt;/code&gt; 設定&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;如果你使用 &lt;strong&gt;javascript&lt;/strong&gt;：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/javascripts/examples.js&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　$(&lt;span class=&quot;string&quot;&gt;&#39;.wmd-output&#39;&lt;/span&gt;).each(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;i&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; converter = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Markdown.Converter();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; content = $(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;).html();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　$(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;).html(converter.makeHtml(content));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果你使用 &lt;strong&gt;coffeescript&lt;/strong&gt;：&lt;/p&gt;
&lt;figure class=&quot;highlight coffeescript&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/javascripts/examples.coffee&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ -&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　$(&lt;span class=&quot;string&quot;&gt;&#39;.wmd-output&#39;&lt;/span&gt;).each (i) -&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　converter = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Markdown.Converter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　content = $(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;).html()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　$(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;).html converter.makeHtml(content)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;注意！以上程式碼縮排請自行重新縮排，以免有全形半形錯誤。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;(2) 於 view 中調用 &lt;code&gt;.wmd-output&lt;/code&gt;&lt;/strong&gt;&lt;br&gt;　　這樣我們就可以在 view 中調用 &lt;code&gt;.wmd-output&lt;/code&gt; 來呈現囉！&lt;br&gt;&lt;figure class=&quot;highlight haml&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/views/examples.html.haml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;.wmd-output&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　:preserve&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 　　#&amp;#123;&lt;span class=&quot;ruby&quot;&gt;@example.description&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;為使輸出為安全性之-html，我們使用-sanitize-作逸出-更新-2015-12-16&quot;&gt;&lt;a href=&quot;#為使輸出為安全性之-html，我們使用-sanitize-作逸出-更新-2015-12-16&quot; class=&quot;headerlink&quot; title=&quot;為使輸出為安全性之 html，我們使用 sanitize 作逸出(更新 2015.12.16)&quot;&gt;&lt;/a&gt;&lt;strong&gt;為使輸出為安全性之 html，我們使用 sanitize 作逸出(更新 2015.12.16)&lt;/strong&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight haml&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/views/examples.html.haml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;.wmd-output&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　:preserve&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 　　#&amp;#123;&lt;span class=&quot;ruby&quot;&gt;sanitize(@example.description)&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;以上，就完成了在 rails 中使用 pagedown editor 和顯示 Markdown 內容囉！&lt;/p&gt;
&lt;p&gt;That’s it, &lt;strong&gt;DONE!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;【參考資料】&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Pagedown-bootstrap-rails: &lt;a href=&quot;https://github.com/hughevans/pagedown-bootstrap-rails&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/hughevans/pagedown-bootstrap-rails&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Font-awesome-rails: &lt;a href=&quot;https://github.com/bokmann/font-awesome-rails&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/bokmann/font-awesome-rails&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Rails 導入 Markdown 介紹: &lt;a href=&quot;http://doruby.kbmj.com/nakanishi/20150729/rails_Markdown_&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://doruby.kbmj.com/nakanishi/20150729/rails_Markdown_&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Render Markdown in Rails4: &lt;a href=&quot;http://stackoverflow.com/questions/21536816/rendering-pagedown-markdown-in-rails-4&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://stackoverflow.com/questions/21536816/rendering-pagedown-markdown-in-rails-4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Haml Preserve: &lt;a href=&quot;http://haml.info/docs/yardoc/Haml/Filters/Preserve.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://haml.info/docs/yardoc/Haml/Filters/Preserve.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/program/markdown-tools.jpg&quot; alt=&quot;上傳圖片功能 - via CarrierWave&quot; title=&quot;Pic by mashable.com&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　為了讓自己寫的網站擁有編輯器的功能，可以使用一些現成的編輯器來實現，如 &lt;a href=&quot;https://github.com/galetahub/ckeditor&quot;&gt;&lt;strong&gt;ckeditor&lt;/strong&gt;&lt;/a&gt;、&lt;a href=&quot;https://github.com/tsechingho/ckeditor-rails&quot;&gt;&lt;strong&gt;ckeditor-rails&lt;/strong&gt;&lt;/a&gt;、&lt;a href=&quot;https://github.com/ujifgc/pagedown&quot;&gt;&lt;strong&gt;pagedown&lt;/strong&gt;&lt;/a&gt; 諸如此類，由於已經喜歡上寫 markdown 的感覺，所以選了 &lt;a href=&quot;https://github.com/hughevans/pagedown-bootstrap-rails&quot;&gt;&lt;strong&gt;pagedown-bootstrap-rails&lt;/strong&gt;&lt;/a&gt; 來實現我的功能。&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　了解 &lt;a href=&quot;http://markdown.tw/&quot;&gt;&lt;strong&gt;Markdown&lt;/strong&gt;&lt;/a&gt; 怎麼寫之後，就習慣使用支援 markdown 的編輯器了嗎？&lt;/p&gt;
    
    </summary>
    
      <category term="Programmer" scheme="http://georgiowan.github.io/categories/Programmer/"/>
    
    
      <category term="rubyonrails" scheme="http://georgiowan.github.io/tags/rubyonrails/"/>
    
      <category term="rails4" scheme="http://georgiowan.github.io/tags/rails4/"/>
    
      <category term="pagedown" scheme="http://georgiowan.github.io/tags/pagedown/"/>
    
      <category term="Markdown" scheme="http://georgiowan.github.io/tags/Markdown/"/>
    
      <category term="editor" scheme="http://georgiowan.github.io/tags/editor/"/>
    
      <category term="pagedown-bootstrap-rails" scheme="http://georgiowan.github.io/tags/pagedown-bootstrap-rails/"/>
    
  </entry>
  
  <entry>
    <title>[Rails] 上傳圖片功能 - via CarrierWave</title>
    <link href="http://georgiowan.github.io/2015/rails-upload-pictures-via-carrierwave/"/>
    <id>http://georgiowan.github.io/2015/rails-upload-pictures-via-carrierwave/</id>
    <published>2015-11-03T03:22:00.000Z</published>
    <updated>2016-05-25T05:41:38.552Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/program/rails_image_uploader.png&quot; alt=&quot;上傳圖片功能 - via CarrierWave&quot; title=&quot;Pic by Stanko Krtalić Rusendić&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　一個網站在許多地方都需要上傳圖片或照片的功能，例如大頭貼(Avatar)或是商品照片等，而在 rails 中我們有現成的 gem可以使用，你可以使用 &lt;a href=&quot;https://github.com/thoughtbot/paperclip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;paperclip&lt;/strong&gt;&lt;/a&gt; 或 &lt;a href=&quot;https://github.com/carrierwaveuploader/carrierwave&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;CarrierWave&lt;/strong&gt;&lt;/a&gt; 來實作這個功能，這邊就筆記一下怎麼使用 CarrierWave。&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　從完全沒寫過 web app 直接學習 Ruby on Rails，說實在真有點勉強…但接觸 RoR 後我發現這真的是我喜歡的東西，希望能保持這個初衷和熱情！也期待自己能有更多的作品 ccc&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;筆記&quot;&gt;&lt;a href=&quot;#筆記&quot; class=&quot;headerlink&quot; title=&quot;筆記&quot;&gt;&lt;/a&gt;&lt;strong&gt;筆記&lt;/strong&gt;&lt;/h1&gt;&lt;h3 id=&quot;1-Gem&quot;&gt;&lt;a href=&quot;#1-Gem&quot; class=&quot;headerlink&quot; title=&quot;1. Gem&quot;&gt;&lt;/a&gt;1. Gem&lt;/h3&gt;&lt;p&gt;　先添加 gem 到 Gemfile 中&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;Gemfile&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gem &lt;span class=&quot;string&quot;&gt;&#39;carrierwave&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;~&amp;gt; 0.10.0&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gem &lt;span class=&quot;string&quot;&gt;&#39;rmagick&#39;&lt;/span&gt;    , &lt;span class=&quot;string&quot;&gt;&#39;~&amp;gt; 2.15&#39;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;# 使用 rmagick 作縮放圖片功能&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;then,&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;bundle install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;【提醒】安裝 rmagick 前得先安裝 libmagickwand-dev。&lt;br&gt;　　　　由於我的環境是 Ubuntu 15.04，所以透過 &lt;code&gt;sudo apt-get install libmagickwand-dev&lt;/code&gt; 安裝&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;2-生成-Uploader&quot;&gt;&lt;a href=&quot;#2-生成-Uploader&quot; class=&quot;headerlink&quot; title=&quot;2. 生成 Uploader&quot;&gt;&lt;/a&gt;2. 生成 Uploader&lt;/h3&gt;&lt;p&gt;　bundle install 後，可以在 &lt;code&gt;rails g -h&lt;/code&gt; 看到新增了 uploader，接著&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rails g uploader Iamge &lt;span class=&quot;comment&quot;&gt;# 會生成 app/uploaders/image_uploader.rb&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;3-添加欄位&quot;&gt;&lt;a href=&quot;#3-添加欄位&quot; class=&quot;headerlink&quot; title=&quot;3. 添加欄位&quot;&gt;&lt;/a&gt;3. 添加欄位&lt;/h3&gt;&lt;p&gt;　在想要上傳圖片的資料表中添加對應的欄位&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rails g migration add_image_to_users &lt;span class=&quot;symbol&quot;&gt;image:&lt;/span&gt;string &lt;span class=&quot;comment&quot;&gt;# 此例為添加一欄位(image)至 User 中&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;then, 記得 migrate&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rake &lt;span class=&quot;symbol&quot;&gt;db:&lt;/span&gt;migrate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;4-實作上傳及顯示功能&quot;&gt;&lt;a href=&quot;#4-實作上傳及顯示功能&quot; class=&quot;headerlink&quot; title=&quot;4. 實作上傳及顯示功能&quot;&gt;&lt;/a&gt;4. 實作上傳及顯示功能&lt;/h3&gt;&lt;p&gt;　首先在 model 中掛載 uploader&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/models/user.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mount_uploader &lt;span class=&quot;symbol&quot;&gt;:image&lt;/span&gt;, ImageUploader&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　接著 view 即可作上傳跟顯示，以下為上傳、快取、刪除跟顯示的作法&lt;br&gt;&lt;figure class=&quot;highlight erb&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/views/users/new.html.erb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;%=&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;ruby&quot;&gt; simple_form_for @user &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;|f|&lt;/span&gt; &lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;%&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;%=&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;ruby&quot;&gt; f.input &lt;span class=&quot;symbol&quot;&gt;:image&lt;/span&gt; &lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;%&amp;gt;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 上傳 --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;%=&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;ruby&quot;&gt; f.check_box &lt;span class=&quot;symbol&quot;&gt;:remove_image&lt;/span&gt; &lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;%&amp;gt;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 刪除 --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;%=&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;ruby&quot;&gt; f.hidden_field &lt;span class=&quot;symbol&quot;&gt;:image_cache&lt;/span&gt; &lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;%&amp;gt;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 快取 _cache (讓填表時若有誤，不用重新選擇圖片) --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;%=&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;ruby&quot;&gt; image_tag @user.image &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; @user.image? &lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;%&amp;gt;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 如果 user 已有圖片的話，就顯示 --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;%&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;ruby&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt; &lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;%&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　最後，controller 中記得加入 strong params&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/controllers/users_controller.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;params.&lt;span class=&quot;keyword&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;symbol&quot;&gt;:user&lt;/span&gt;).permit( &lt;span class=&quot;symbol&quot;&gt;:image&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;:image_cache&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;:remove_image&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　以上，就完成用 &lt;strong&gt;CarrierWave&lt;/strong&gt; 上傳圖片及顯示的功能囉！但，上傳後圖片大小為&lt;strong&gt;原始大小&lt;/strong&gt;，所以我們可以透過 &lt;strong&gt;rmagick&lt;/strong&gt; 來作 resize。&lt;/p&gt;
&lt;h3 id=&quot;5-使用-rmagick&quot;&gt;&lt;a href=&quot;#5-使用-rmagick&quot; class=&quot;headerlink&quot; title=&quot;5. 使用 rmagick&quot;&gt;&lt;/a&gt;5. 使用 rmagick&lt;/h3&gt;&lt;p&gt;　首先在 &lt;code&gt;image_uploader.rb&lt;/code&gt; 中取消註解：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/uploaders/image_uploader.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;include&lt;/span&gt; CarrierWave::RMagick &lt;span class=&quot;comment&quot;&gt;# 取消註解&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version &lt;span class=&quot;symbol&quot;&gt;:thumb&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  process &lt;span class=&quot;symbol&quot;&gt;:resize_to_fit&lt;/span&gt; =&amp;gt; [&lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　上面透過 &lt;code&gt;thumb&lt;/code&gt;，讓上傳時保存原圖，並且產生一個 resize version，這樣想用&lt;strong&gt;原圖&lt;/strong&gt;或&lt;strong&gt;縮放後的版本&lt;/strong&gt;都很方便！&lt;br&gt;&lt;figure class=&quot;highlight erb&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/views/users/show.html.erb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 原圖尺寸 --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;%=&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;ruby&quot;&gt; image_tag @user.image &lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;%&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 縮放後尺寸 --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;%=&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;ruby&quot;&gt; image_tag @user.image_url(&lt;span class=&quot;symbol&quot;&gt;:thumb&lt;/span&gt;) &lt;/span&gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;%&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　從上面可看到，從 &lt;code&gt;_url(:thumb)&lt;/code&gt; 即可取得縮放後的圖片了！&lt;/p&gt;
&lt;p&gt;That’s it, &lt;strong&gt;DONE!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;【參考資料】&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CarrierWave: &lt;a href=&quot;https://github.com/carrierwaveuploader/carrierwave&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/carrierwaveuploader/carrierwave&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;RMagick: &lt;a href=&quot;https://github.com/rmagick/rmagick&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/rmagick/rmagick&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/program/rails_image_uploader.png&quot; alt=&quot;上傳圖片功能 - via CarrierWave&quot; title=&quot;Pic by Stanko Krtalić Rusendić&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　一個網站在許多地方都需要上傳圖片或照片的功能，例如大頭貼(Avatar)或是商品照片等，而在 rails 中我們有現成的 gem可以使用，你可以使用 &lt;a href=&quot;https://github.com/thoughtbot/paperclip&quot;&gt;&lt;strong&gt;paperclip&lt;/strong&gt;&lt;/a&gt; 或 &lt;a href=&quot;https://github.com/carrierwaveuploader/carrierwave&quot;&gt;&lt;strong&gt;CarrierWave&lt;/strong&gt;&lt;/a&gt; 來實作這個功能，這邊就筆記一下怎麼使用 CarrierWave。&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　從完全沒寫過 web app 直接學習 Ruby on Rails，說實在真有點勉強…但接觸 RoR 後我發現這真的是我喜歡的東西，希望能保持這個初衷和熱情！也期待自己能有更多的作品 ccc&lt;/p&gt;
    
    </summary>
    
      <category term="Programmer" scheme="http://georgiowan.github.io/categories/Programmer/"/>
    
    
      <category term="rubyonrails" scheme="http://georgiowan.github.io/tags/rubyonrails/"/>
    
      <category term="rails" scheme="http://georgiowan.github.io/tags/rails/"/>
    
      <category term="gem" scheme="http://georgiowan.github.io/tags/gem/"/>
    
      <category term="ruby" scheme="http://georgiowan.github.io/tags/ruby/"/>
    
      <category term="CarrierWave" scheme="http://georgiowan.github.io/tags/CarrierWave/"/>
    
      <category term="RMagick" scheme="http://georgiowan.github.io/tags/RMagick/"/>
    
      <category term="upload" scheme="http://georgiowan.github.io/tags/upload/"/>
    
  </entry>
  
  <entry>
    <title>[Rails] 讓 URL 不顯示 id 的方法 - via Friendly_id</title>
    <link href="http://georgiowan.github.io/2015/seo-via-friendly-id/"/>
    <id>http://georgiowan.github.io/2015/seo-via-friendly-id/</id>
    <published>2015-11-02T17:46:00.000Z</published>
    <updated>2016-05-24T16:24:29.139Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/program/friend-fingers.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　本篇來記錄一下怎麼使用 &lt;a href=&quot;https://github.com/norman/friendly_id&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;Friendly_id&lt;/strong&gt;&lt;/a&gt; 以及使用 &lt;a href=&quot;https://github.com/norman/babosa&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;Babosa&lt;/strong&gt;&lt;/a&gt; 這兩個 gem 來達到美化 URL 的效果。&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　目前學習 &lt;strong&gt;Ruby on Rails&lt;/strong&gt; 大約一個月半了，從學習的開始，打了一篇&lt;a href=&quot;https://georgiosky2000.wordpress.com/2015/09/07/ruby-on-rails-%E4%BD%BF%E7%94%A8-rvm-%E7%AE%A1%E7%90%86-ruby-rails-%E7%92%B0%E5%A2%83/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;安裝文&lt;/strong&gt;&lt;/a&gt;後，就被別的有趣的事情吸引去了，例如追韓劇、Running man、康熙、中國好聲音4、爸爸去哪兒3… 跑題了:P&lt;br&gt;　　&lt;strong&gt;總而言之！&lt;/strong&gt;現在開始使用 Logdown 作筆記跟分享，希望能幫助到需要的人。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;筆記&quot;&gt;&lt;a href=&quot;#筆記&quot; class=&quot;headerlink&quot; title=&quot;筆記&quot;&gt;&lt;/a&gt;&lt;strong&gt;筆記&lt;/strong&gt;&lt;/h1&gt;&lt;h3 id=&quot;1-Gem&quot;&gt;&lt;a href=&quot;#1-Gem&quot; class=&quot;headerlink&quot; title=&quot;1. Gem :&quot;&gt;&lt;/a&gt;1. Gem :&lt;/h3&gt;&lt;p&gt;　先添加 gem 到 Gemfile 中&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;Gemfile&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gem &lt;span class=&quot;string&quot;&gt;&#39;friendly_id&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;~&amp;gt; 5.1.0&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gem &lt;span class=&quot;string&quot;&gt;&#39;babosa&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　記得在 console bundle 一下&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;bundle install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;2-生成資料表&quot;&gt;&lt;a href=&quot;#2-生成資料表&quot; class=&quot;headerlink&quot; title=&quot;2. 生成資料表&quot;&gt;&lt;/a&gt;2. 生成資料表&lt;/h3&gt;&lt;p&gt;　在 console 下&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rails g friendly_id&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rails g migration add_slug_to_users slug:string:uniq&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rake db:migrate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　上面的 &lt;code&gt;add_slug_to_users&lt;/code&gt; 意思是，加入一個 slug 欄位到資料表 &lt;strong&gt;User&lt;/strong&gt; 中。&lt;/p&gt;
&lt;h3 id=&quot;3-撰寫-Model&quot;&gt;&lt;a href=&quot;#3-撰寫-Model&quot; class=&quot;headerlink&quot; title=&quot;3. 撰寫 Model&quot;&gt;&lt;/a&gt;3. 撰寫 Model&lt;/h3&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/models/user.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;extend FriendlyId&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;friendly_id &lt;span class=&quot;symbol&quot;&gt;:name&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;use:&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;:slugged&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;　以上，就完成單純使用 &lt;strong&gt;name&lt;/strong&gt; 來當作路徑，若想自訂路徑格式，就來覆寫 &lt;code&gt;normalize_friendly_id&lt;/code&gt; :&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/models/user.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;normalize_friendly_id&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(input)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  input.to_s.to_slug.normalize.to_s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;如果有使用 babosa gem 的話，就可以透過覆寫 &lt;code&gt;normalize_friendly_id&lt;/code&gt; 支援&lt;strong&gt;中文&lt;/strong&gt;囉！&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;4-Friendly-find&quot;&gt;&lt;a href=&quot;#4-Friendly-find&quot; class=&quot;headerlink&quot; title=&quot;4. Friendly.find&quot;&gt;&lt;/a&gt;4. Friendly.find&lt;/h3&gt;&lt;p&gt;　這邊有兩個方法來讓 id 被 friendly 查找：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;修改 controller 中的 find &lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/controller/users_controller.rb   &lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@user = User.friendly.find(params[&lt;span class=&quot;symbol&quot;&gt;:id&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# &lt;span class=&quot;doctag&quot;&gt;@user&lt;/span&gt; = User.find(params[:id])&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;或是，將 config 中的 finder 功能打開：&lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;config/initializers/friendly_id.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;config.use &lt;span class=&quot;symbol&quot;&gt;:finders&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;# 把註解取消，啟動自動查找功能&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;以上，就完成功能囉！&lt;br&gt;如果已經有資料了，想直接更新 slug，就直接在 rails console 中執行：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;User.find_each(&amp;amp;&lt;span class=&quot;symbol&quot;&gt;:save&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;這樣就會自動把 slug 填上了！&lt;/p&gt;
&lt;h2 id=&quot;2015-12-31-新增&quot;&gt;&lt;a href=&quot;#2015-12-31-新增&quot; class=&quot;headerlink&quot; title=&quot;2015.12.31 新增&quot;&gt;&lt;/a&gt;2015.12.31 新增&lt;/h2&gt;&lt;p&gt;若想讓 slug 隨著資料變更時作 update，我們可以透過定義 &lt;code&gt;should_generate_new_friendly_id?&lt;/code&gt; 達到目的&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/models/user.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;　　&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;should_generate_new_friendly_id?&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　　slug.blank? &lt;span class=&quot;params&quot;&gt;||&lt;/span&gt; name_changed? &lt;span class=&quot;comment&quot;&gt;# slug 為 nil 或 name column 變更時更新&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;5-補充&quot;&gt;&lt;a href=&quot;#5-補充&quot; class=&quot;headerlink&quot; title=&quot;5. 補充&quot;&gt;&lt;/a&gt;5. 補充&lt;/h3&gt;&lt;p&gt;　如果想符合 &lt;a href=&quot;https://zh.wikipedia.org/wiki/%E6%90%9C%E5%B0%8B%E5%BC%95%E6%93%8E%E6%9C%80%E4%BD%B3%E5%8C%96&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;SEO&lt;/strong&gt;&lt;/a&gt;，可以在 &lt;code&gt;normalize_friendly_id&lt;/code&gt; 裡定義路徑名稱，例如：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/models/user.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;normalize_friendly_id&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(input)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;subst&quot;&gt;#&amp;#123;id&amp;#125;&lt;/span&gt;-&lt;span class=&quot;subst&quot;&gt;#&amp;#123;input.to_s.to_slug.normalize.to_s&amp;#125;&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;# what ever you want&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　以上面程式碼為例，路徑名稱就變成類似像 &lt;code&gt;xxx/users/1-georgio&lt;/code&gt;。&lt;br&gt;　另外，除了透過 &lt;strong&gt;friendly_id&lt;/strong&gt; 去改變 url path 外，其實 rails 本身的解法是覆寫 model &lt;code&gt;to_params&lt;/code&gt; method：&lt;br&gt;&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;figcaption&gt;&lt;span&gt;app/models/user.rb&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;to_params&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;subst&quot;&gt;#&amp;#123;id&amp;#125;&lt;/span&gt;-&lt;span class=&quot;subst&quot;&gt;#&amp;#123;name&amp;#125;&lt;/span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;　就端看想用什麼方案解決囉 :D&lt;br&gt;　&lt;br&gt;That’s it, &lt;strong&gt;DONE!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;【參考資料】&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;FriendlyId: &lt;a href=&quot;https://github.com/norman/friendly_id&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/norman/friendly_id&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Babosa: &lt;a href=&quot;https://github.com/norman/babosa&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/norman/babosa&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Friendly URLs: &lt;a href=&quot;https://gist.github.com/cdmwebs/1209732&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://gist.github.com/cdmwebs/1209732&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Update slug automatically: &lt;a href=&quot;http://stackoverflow.com/questions/19072432/friendly-id-slug-not-changing-on-update&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://stackoverflow.com/questions/19072432/friendly-id-slug-not-changing-on-update&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/program/friend-fingers.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　本篇來記錄一下怎麼使用 &lt;a href=&quot;https://github.com/norman/friendly_id&quot;&gt;&lt;strong&gt;Friendly_id&lt;/strong&gt;&lt;/a&gt; 以及使用 &lt;a href=&quot;https://github.com/norman/babosa&quot;&gt;&lt;strong&gt;Babosa&lt;/strong&gt;&lt;/a&gt; 這兩個 gem 來達到美化 URL 的效果。&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;　　目前學習 &lt;strong&gt;Ruby on Rails&lt;/strong&gt; 大約一個月半了，從學習的開始，打了一篇&lt;a href=&quot;https://georgiosky2000.wordpress.com/2015/09/07/ruby-on-rails-%E4%BD%BF%E7%94%A8-rvm-%E7%AE%A1%E7%90%86-ruby-rails-%E7%92%B0%E5%A2%83/&quot;&gt;&lt;strong&gt;安裝文&lt;/strong&gt;&lt;/a&gt;後，就被別的有趣的事情吸引去了，例如追韓劇、Running man、康熙、中國好聲音4、爸爸去哪兒3… 跑題了:P&lt;br&gt;　　&lt;strong&gt;總而言之！&lt;/strong&gt;現在開始使用 Logdown 作筆記跟分享，希望能幫助到需要的人。&lt;/p&gt;
    
    </summary>
    
      <category term="Programmer" scheme="http://georgiowan.github.io/categories/Programmer/"/>
    
    
      <category term="rubyonrails" scheme="http://georgiowan.github.io/tags/rubyonrails/"/>
    
      <category term="rails" scheme="http://georgiowan.github.io/tags/rails/"/>
    
      <category term="gem" scheme="http://georgiowan.github.io/tags/gem/"/>
    
      <category term="friendly_id" scheme="http://georgiowan.github.io/tags/friendly-id/"/>
    
      <category term="babosa" scheme="http://georgiowan.github.io/tags/babosa/"/>
    
      <category term="to_params" scheme="http://georgiowan.github.io/tags/to-params/"/>
    
  </entry>
  
</feed>
